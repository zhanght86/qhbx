F.module("/static/common/ui/baidu/fx/fx.js",function(c,a){var b=c("/static/common/lib/tangram/base/base.js");b.fx=b.fx||{};b.fx.opacity=function(g,d){if(!(g=b.dom.g(g))){return null}d=b.object.extend({from:0,to:1},d||{});var h=g,f=b.fx.create(h,b.object.extend({initialize:function(){b.dom.show(g),b.browser.ie<9?this.protect("filter"):(this.protect("opacity"),this.protect("KHTMLOpacity")),this.distance=this.to-this.from},render:function(j){var i=this.distance*j+this.from;b.browser.ie<9?h.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity:"+Math.floor(i*100)+")":(h.style.opacity=i,h.style.KHTMLOpacity=i)}},d),"baidu.fx.opacity");return f.launch()};b.fx.fadeIn=function(f,d){if(!(f=b.dom.g(f))){return null}var g=b.fx.opacity(f,b.object.extend({from:0,to:1,restoreAfterFinish:!0},d||{}));return g.__type="baidu.fx.fadeIn",g};b.fx.fadeOut=function(f,d){if(!(f=b.dom.g(f))){return null}var g=b.fx.opacity(f,b.object.extend({from:1,to:0,restoreAfterFinish:!0},d||{}));return g.addEventListener("onafterfinish",function(){b.dom.hide(this.element)}),g.__type="baidu.fx.fadeOut",g};b.fx.expand=function(j,f){if(!(j=b.dom.g(j))){return null}var l=j,h,d,g={vertical:{value:"height",offset:"offsetHeight",stylesValue:["paddingBottom","paddingTop","borderTopWidth","borderBottomWidth"]},horizontal:{value:"width",offset:"offsetWidth",stylesValue:["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"]}},k=b.fx.create(l,b.object.extend({orientation:"vertical",initialize:function(){function i(o,m){var p=parseInt(b.dom.getStyle(o,m));return p=isNaN(p)?0:p,p=b.isNumber(p)?p:0,p}d=g[this.orientation],b.dom.show(l),this.protect(d.value),this.protect("overflow"),this.restoreAfterFinish=!0,h=l[d.offset],b.forEach(d.stylesValue,function(e){h-=i(l,e)}),l.style.overflow="hidden",l.style[d.value]="1px"},transition:function(i){return Math.sqrt(i)},render:function(i){l.style[d.value]=Math.floor(i*h)+"px"}},f||{}),"baidu.fx.expand_collapse");return k.launch()};b.fx.collapse=function(j,f){if(!(j=b.dom.g(j))){return null}var l=j,h,d,g={vertical:{value:"height",offset:"offsetHeight",stylesValue:["paddingBottom","paddingTop","borderTopWidth","borderBottomWidth"]},horizontal:{value:"width",offset:"offsetWidth",stylesValue:["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"]}},k=b.fx.create(l,b.object.extend({orientation:"vertical",initialize:function(){d=g[this.orientation],this.protect(d.value),this.protect("overflow"),this.restoreAfterFinish=!0,h=l[d.offset],l.style.overflow="hidden"},transition:function(i){return Math.pow(1-i,2)},render:function(i){l.style[d.value]=Math.floor(i*h)+"px"},finish:function(){b.dom.hide(l)}},f||{}),"baidu.fx.expand_collapse");return k.launch()};b.fx.moveBy=function(h,f,j){if(!(h=b.dom.g(h))||b.dom.getStyle(h,"position")=="static"||typeof f!="object"){return null}var g={};g.x=f[0]||f.x||0,g.y=f[1]||f.y||0;var d=b.fx.move(h,b.object.extend(g,j||{}));return d};b.fx.highlight=function(e,f){if(!(e=b.dom.g(e))){return null}var g=e;var h=b.fx.create(g,b.object.extend({initialize:function(){var i=this,m=b.dom.getStyle,n=b.string.formatColor,p=n(m(g,"color"))||"#000000",q=n(m(g,"backgroundColor"));i.beginColor=i.beginColor||q||"#FFFF00";i.endColor=i.endColor||q||"#FFFFFF";i.finalColor=i.finalColor||i.endColor||i.element.style.backgroundColor;i.textColor==p&&(i.textColor="");this.protect("color");this.protect("backgroundColor");i.c_b=[];i.c_d=[];i.t_b=[];i.t_d=[];for(var d,o=0;o<3;o++){d=2*o+1;i.c_b[o]=parseInt(i.beginColor.substr(d,2),16);i.c_d[o]=parseInt(i.endColor.substr(d,2),16)-i.c_b[o];if(i.textColor){i.t_b[o]=parseInt(p.substr(d,2),16);i.t_d[o]=parseInt(i.textColor.substr(d,2),16)-i.t_b[o]}}},render:function(i){for(var l=this,n="#",o="#",d,m=0;m<3;m++){d=Math.round(l.c_b[m]+l.c_d[m]*i).toString(16);n+=("00"+d).substr(d.length);if(l.textColor){d=Math.round(l.t_b[m]+l.t_d[m]*i).toString(16);o+=("00"+d).substr(d.length)}}g.style.backgroundColor=n;l.textColor&&(g.style.color=o)},finish:function(){this.textColor&&(g.style.color=this.textColor);g.style.backgroundColor=this.finalColor}},f||{}),"baidu.fx.highlight");return h.launch()};a=b.fx;return a},["/static/common/lib/tangram/base/base.js"]);
F.module("/static/common/ui/baidu/baidu.js",function(c,a){var b=c("/static/common/lib/tangram/base/base.js");c("/static/common/ui/baidu/fx/fx.js");b.url={escapeSymbol:function(d){return String(d).replace(/[#%&+=\/\\\ \f\r\n\t]/g,function(e){return"%"+(256+e.charCodeAt()).toString(16).substring(1).toUpperCase()})},getQueryValue:function(e,f){var g=new RegExp("(^|&|\\?|#)"+b.string(f).escapeReg()+"=([^&#]*)(&|\x24|#)","");var d=e.match(g);if(d){return d[2]}return null},jsonToQuery:function(f,h){var d=[],g,e=h||function(i){return b.url.escapeSymbol(i)};b.forEach(f,function(j,i){if(b.isArray(j)){g=j.length;while(g--){d.push(i+"="+e(j[g],i))}}else{d.push(i+"="+e(j,i))}});return d.join("&")}};b.page=b.page||{};b.page.loadCssFile=function(e){var d=document.createElement("link");d.setAttribute("rel","stylesheet");d.setAttribute("type","text/css");d.setAttribute("href",e);document.getElementsByTagName("head")[0].appendChild(d)};return a},["/static/common/lib/tangram/base/base.js","/static/common/ui/baidu/fx/fx.js"]);
F.module("/static/common/ui/baidu/form/form.js",function(c,a){var b=c("/static/common/lib/tangram/base/base.js");c("/static/common/ui/baidu/baidu.js");b.form=b.form||{};b.form.json=function(f,h){var e=f.elements,h=h||function(t,i){return t},l={},r,n,s,g,d,q,p,o;function j(i,t){var u=l[i];if(u){u.push||(l[i]=[u]);l[i].push(t)}else{l[i]=t}}for(var k=0,m=e.length;k<m;k++){r=e[k];s=r.name;if(!r.disabled&&s){n=r.type;g=r.value;switch(n){case"radio":case"checkbox":if(!r.checked){break}case"textarea":case"text":case"password":case"hidden":case"file":case"select-one":j(s,h(g,s));break;case"select-multiple":d=r.options;p=d.length;for(q=0;q<p;q++){o=d[q];if(o.selected){j(s,h(o.value,s))}}break}}}return l};b.form.ValidRule=b.form.ValidRule||b.createClass(function(){var d=this;d._rules={required:function(e){return !!(e&&!/^(?:\s|\u3000)+$/.test(e))},remote:function(f,e){return !!(e&&e.toLowerCase()=="true")},email:/^[\w!#\$%'\*\+\-\/=\?\^`{}\|~]+([.][\w!#\$%'\*\+\-\/=\?\^`{}\|~]+)*@[-a-z0-9]{1,20}[.][a-z0-9]{1,10}([.][a-z]{2})?$/i,number:/^(?:[1-9]\d+|\d)(?:\.\d+)?$/,maxlength:function(f,e){return f.length<=e},minlength:function(f,e){return f.length>=e},rangelength:function(f,e){return f.length>=e[0]&&f.length<=e[1]},equal:function(f,e){return f===(b.isFunction(e)?e():e)},telephone:/^(((?:[\+0]\d{1,3}-[1-9]\d{1,2})|\d{3,4})-)?\d{5,8}$/}}).extend({_getRule:function(d){var e=this;return b.isString(d)?e._rules[d]:e._rules},match:function(e,i,j,d){var f=this,g=f._getRule(e),h=d&&d.param;j(b.isFunction(g)?g(i,h):g.test(i))},addRule:function(d,e){this._rules[d]=e}});b.form.Validator=b.createClass(function(d,j,m){var k=this,l=b.form.Validator,h=l._addons.length,g=0,e;k._form=b.dom.g(d);k._fieldRule=j;k._validRule=new b.form.ValidRule();b.object.extend(k,m);e=k.validateEvent.split(",");function f(i,n){var o={element:n?k._form.elements[n]:k._form,eventName:i,handler:b.fn.bind("_onEventHandler",k,n)};b(o.element).on(o.eventName,o.handler);k.on("ondispose",function(){b(o.element).off(o.eventName,o.handler)})}b.object.each(k._fieldRule,function(n,i){b.array.each(b.isString(n.eventName)?n.eventName.split(","):e,function(o){f(o,i)})});k.validateOnSubmit&&f("onsubmit");for(;g<h;g++){l._addons[g](k)}}).extend({validateEvent:"blur",validateOnSubmit:true,_onEventHandler:function(e,d){var f=this;if(!e){d.preventDefault();f.validate(function(h,g){h&&f._form.submit()});return}f.validateField(e)},addRule:function(d,e,g){var f=this;f._validRule.addRule(d,e);f.fire("addrule",{name:d,handler:e,message:g})},validate:function(h){var f=this,g=b.object.keys(f._fieldRule),d=[],e=0;b.array.each(g,function(i){f.validateField(i,function(k,j){d=d.concat(j);if(e++>=g.length-1){b.isFunction(h)&&h(d.length<=0,d);f.fire("validate",{resultList:d})}})})},validateField:function(d,l){var h=this,k,m=h._fieldRule[d].rule,j=h._form.elements[d].value,f=b.array(b.object.keys(m)).filter(function(n){k=m[n];return(k.hasOwnProperty("param")?k.param:k)!==false}),e=[],g=0;function i(){if(g++>=f.length-1){h.fire("validatefield",{field:d,resultList:e});b.isFunction(l)&&l(e.length<=0,e)}}f.length==0&&i();b.array.each(f,function(n){k=m[n];h._validRule.match(n,j,function(o){!o&&e.push({type:n,field:d,result:o});i()},{param:k.hasOwnProperty("param")?k.param:k})})},dispose:function(){var d=this;d.fire("ondispose")}});b.form.Validator._addons=[];b.form.Validator.register=function(d){typeof d=="function"&&b.form.Validator._addons.push(d)};b.form.Validator.register(function(d){if(!d.showMessage){return}d._defaultId=b.id();d._defaultMessage={required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",number:"Please enter a valid number.",maxlength:"Please enter no more than #{param} characters.",minlength:"Please enter at least #{param} characters.",rangelength:"Please enter a value between #{param[0]} and #{param[1]} characters long.",equal:"Please enter the same value again.",telephone:"Please enter a valid telephone number."};d.on("addrule",function(e){d._defaultMessage[e.name]=e.message});d.on("validatefield",function(e){var h=d._getContentElement(e.field),j=e.resultList.length<=0,g=j?b.object.keys(d._fieldRule[e.field].rule).pop():e.resultList[0].type,f=d._fieldRule[e.field].rule[g],i=f.message;!i&&(i=d._defaultMessage[g]);i=j?(i.success||""):(i.failure||i);b(h).addClass("tangram-"+d.uiType+"-"+(j?"success":"failure")).addClass("tangram-"+d.uiType+"-"+e.field+"-"+(j?"success":"failure")).removeClass("tangram-"+d.uiType+"-"+(j?"failure":"success")).removeClass("tangram-"+d.uiType+"-"+e.field+"-"+(j?"failure":"success")).html(b.string.format(i,{param:f.param,"param[0]":b.isArray(f.param)?f.param[0]:"","param[1]":b.isArray(f.param)?f.param[1]:""}))})});b.object.extend(b.form.Validator.prototype,{showMessage:true,uiType:"validator",tplDOM:'<label id="#{id}" class="#{class}"></label>',_getContentElement:function(h){var g=this,d=g._defaultId+"_"+h,f=b.dom.g(d),e=b.dom.g(g._fieldRule[h].messageContainer);if(!f){b.dom.insertHTML(e||g._form.elements[h],e?"beforeEnd":"afterEnd",b.string.format(g.tplDOM,{id:d,"class":"tangram-"+g.uiType}));f=b.dom.g(d)}return f},getMessageContainer:function(d){return b.dom.g(this._defaultId+"_"+d)}});a=b.form;return a},["/static/common/lib/tangram/base/base.js","/static/common/ui/baidu/baidu.js"]);F.module("/static/common/ui/category/category.js",function(c,a){var b=c("/static/common/lib/tangram/base/base.js");var d=b.createClass(function(g){var h=this;b.forEach(g,function(l,k){b.isFunction(l)?h.on(k,l):h[k]=l});if(b.isString(h.target)){h.target=b("#"+h.target)}h.optionTpl='<option value="#{0}">#{1}</option>';h.result={valueArr:[],textArr:[]};if(!h.data.level1){b.sio("/classleveljs").callByBrowser(function(){h.data={level1:class_level_1,level2:class_level_2,level3:class_level_3};j()})}else{j()}function j(){h.container=b("<div/>").addClass("category-main").addClass(h.className).attr("id","cate-"+h.guid).appendTo(h.target);b.array([1,2,3]).forEach(function(k){var l=b("<select/>").attr({size:h.selectSize||16}).addClass("cate-sel-"+k).hide().appendTo(h.container).change(function(m){f(k,b(this));h.fire("change")}).after(b('<span class="cate-splitor"/>').html(h.splitor||"").hide())});h.selector=b("select",h.container[0]);i(h.selector.eq(0),h.data.level1);if(h.defaultValue){h.setValue(h.defaultValue)}}function f(m,k){var l=k.val();if(m<3){h.selector.eq(2).hide().empty().prev().hide();l&&i(h.selector.eq(m),e(l,m+1),m)}}function e(m,l){var k=[];b.forEach(h.data["level"+l],function(p,n){var o=[];o[0]=p[1];o[1]=p[2];m==p[0]&&k.push(o)});return k}function i(l,k,m){if(!(l&&k&&k.length)){return}l.empty().show().prev().show();m&&b(b.string(h.optionTpl).format([0,"��ѡ"])).appendTo(l).prop("selected",true);b.each(k,function(n,o){l.get(0).options.add(new Option(o[1],o[0]))})}}).extend({data:{},setValue:function(g){var f=this;if(b.isArray(g)){b.forEach(g,function(i,h){f.selector.eq(h).val(i||"0").change()})}else{f.setValue(e(g))}function e(o,n){if(!o){return}n=n||3;var m=f.data["level"+n];for(var j=0,h=m.length;j<h;j++){var l=m[j];if(n==1){if(o==l[0]){return[o,"0","0"]}}else{if(o==l[1]){var k=n==2?l:e(l[0],2);return[k[0],k[1],n==3?o:"0"]}}}return e(o,--n)}},getValue:function(){var f=this,e={cid:0,name:"",arrCid:[],arrName:[]};f.selector.each(function(g,h){if(this.value&&this.value!="0"){e.cid=e.arrCid[g]=this.value;e.name=e.arrName[g]=b(this.options[this.selectedIndex]).text()}});return e.cid?e:false}});a=d;return a},["/static/common/lib/tangram/base/base.js"]);F.module("/static/common/ui/dialog/dialog.js",function(e,b){var d=e("/static/common/lib/tangram/base/base.js"),c=e("/static/common/ui/event/event.js"),a=e("/static/common/lib/magic/Dialog/Dialog.js"),f=e("/static/common/lib/magic/control/Dialog/Dialog.js");e("/static/common/lib/magic/control/Dialog/$mask/$mask.js");e("/static/common/lib/magic/control/Dialog/$button/$button.js");b=function(i){var g=function(m,l){var n='<a href="#" onclick="return false;" class="btn btn-32-green"><em><b>#{text}</b></em></a>';d(d.string(n).format(m)).appendTo(l);return d(l).children().get(0)};var h=d.extend({autoRender:true,zIndex:100000,mask:{enable:true,opacity:0.25}},i);var k={items:[{text:"ȷ��",click:function(){if(h.onaccept){if(!h.onaccept.apply(this,arguments)){return}}c.fire("dialog.close")}}],align:"center",enable:true};if(h.type=="alert"){h.buttons=h.buttons||k}if(h.type=="confirm"){k.items.push({text:"ȡ��",click:function(){if(h.oncancel){if(!h.oncancel.apply(this,arguments)){return}}c.fire("dialog.close")}});h.buttons=h.buttons||k}if(h.buttons){d.array(h.buttons.items).each(function(l,m){m.builder=m.builder||g})}var j=new a(h);d.forEach(h,function(m,l){if(d.isFunction(m)){j.on(l,m)}});j.center();if(j._options.autoDispose){j.on("hide",function(l){d(j.getElement()).add(j._mask.getElement()).remove()})}if(j._options.autoRender){j.render()}c.on("dialog.close",function(l){if(!j.disposed&&j.isShowing()){j.hide()}});return j};b.alert=function(h,g){return new b(d.extend({type:"alert",width:350,height:160,titleText:"֪����ʾ",content:h,autoDispose:true},g||{}))};return b},["/static/common/lib/tangram/base/base.js","/static/common/ui/event/event.js","/static/common/lib/magic/Dialog/Dialog.js","/static/common/lib/magic/control/Dialog/Dialog.js","/static/common/lib/magic/control/Dialog/$mask/$mask.js","/static/common/lib/magic/control/Dialog/$button/$button.js"]);F.module("/static/common/ui/event/event.js",function(d,a){var c=d("/static/common/lib/tangram/base/base.js");var b=c.createSingle();b.un=b.off;a=F.ec=b;return a},["/static/common/lib/tangram/base/base.js"]);F.module("/static/common/ui/form/form.js",function(c,a){var b=c("/static/common/lib/tangram/base/base.js");a=b.createClass(function(d){var e=this;e.id=e.name="form-"+e.guid;e.instance=b("<form></form>").attr({name:e.name,id:e.id,method:"get",action:"/submit"}).appendTo(document.body);b.forEach(d,function(g,f){if(b.isString(g)){e.instance.attr(f,g)}else{if(b.isFunction(g)){e.on(f,g)}else{if(b.isObject(g)&&f=="input"){b.forEach(g,function(i,h){b('<input type="hidden" name="'+h+'" />').val(i).appendTo(e.instance)})}}}})}).extend({get:function(){return this.instance},dispose:function(){this.instance.remove()},submit:function(){if(this.fire("onsubmit")){this.instance.submit()}return this}});return a},["/static/common/lib/tangram/base/base.js"]);F.module("/static/common/ui/hi/hi.js",function(e,c){var d=e("/static/common/lib/tangram/base/base.js");var g=e("/static/common/ui/form/form.js");function b(){var i="";try{i=new ActiveXObject("WebDetect.Detect").GetVersion()}catch(j){}try{if(typeof(navigator.mimeTypes["application/x-baiduhi"])=="object"){i=".*"}}catch(j){}return i}function h(j){var i=new Date(),k=i.getTime();i.setTime(k+30*1000);document.cookie="IM_add="+escape(j+"|zhidao.baidu.com|"+(new Date().getTime()).toString(36))+";domain=baidu.com;path=/;expires="+i.toGMTString();h.f=h.f||new g({action:"http://web.im.baidu.com",target:"baidu_webim",name:"__IM_REDIRECT_FORM"});h.f.submit()}function f(j){var i=[];for(prop in j){if(prop!="onim"&&prop!="onwebim"){i.push(prop+"="+j[prop])}}return(i.length>0?"&"+i.join("&"):"")}function a(i,l,j,k){d.sio("http://im.baidu.com/nop?type="+i+"&sid="+l+"&id="+j+f(k)+"&t="+new Date().getTime()).callByBrowser()}window.startBaiduHi=function(k,o,m,n){a(k,o,m,n);var j=b(),l=d("#__IM_REDIRECT_IFRAME");if(j==""){if(/active|c2cmsg|message|addcontact|addgroup|creategroup/i.test(k)){h(m);if(n&&n.onwebim){n.onwebim()}}return false}if(!(new RegExp(j.replace(/(\.)/g,"\\."),"i").test(k))){return false}var i="baidu://"+k+"/?sid="+o+"&id="+m+f(n);if(d.browser.ie){i+="&browser=IE"}else{if(d.browser.firefox){i+="&browser=FF&promo=c2cmsg|message|addgroup|creategroup|addcontact"}}if(n&&n.onim){n.onim()}if(!l.get(0)){l=d("<iframe/>").hide().attr({id:"__IM_REDIRECT_IFRAME"}).appendTo(document.body)}l.attr("src",i)};return c},["/static/common/lib/tangram/base/base.js","/static/common/ui/form/form.js"]);F.module("/static/common/ui/log/log.js",function(f,c){var e=f("/static/common/lib/tangram/base/base.js");f("/static/common/ui/baidu/baidu.js");var d=f("/static/common/ui/event/event.js");var g={},a={action:"entrance"};function b(i){var j=i.split(","),h={};e.forEach(j,function(m,k){var l=m.split(":");h[l[0]]=l[1]});return h}d.on("log.init",function(j){var i=e.extend({query:"a",evtType:"click"},j);var h=e(i.query);delete i.query;h.filter("[log]").on(i.evtType,function(l){var k=e(this),m=b(k.attr("log"));if(k[0].tagName.match(/^a$/i)&&!m.url){m.url=k.attr("href")}m=e.extend(e.extend({},i),m);c.send(m)})});d.on("log.addKey",function(h){e.extend(g,h);d.fire("log.keyAdded")});c.send=function(j,i){var h="http://nsclick.baidu.com/v.gif?";var k=e.extend(e.extend({pid:102,url:location.href},g),j);k.type=e.isNumber(k.type)?k.type:k.key;e.array(["currentTarget","returnValue","target","key","preventDefault"]).each(function(l,m){delete k[m]});if(i){e.extend(k,a)}h+=e.url.jsonToQuery(k,encodeURIComponent);e.sio(h).log();return h};c.addPvKey=function(h){e.extend(a,h)};c.stat=function(h){e.sio("/stat?"+h).log()};c.parseLog=b;return c},["/static/common/lib/tangram/base/base.js","/static/common/ui/baidu/baidu.js","/static/common/ui/event/event.js"]);F.module("/static/common/ui/login/login.js",function(d,h){var g=d("/static/common/lib/tangram/base/base.js");var j=d("/static/common/ui/event/event.js");var k=d("/static/common/ui/dialog/dialog.js");var m=d("/static/common/ui/uri/uri.js");var o=null,n=false,a=new Date(),l="http://passport.bdimg.com/passApi/js/uni_login_wrapper.js?cdnversion="+a.getFullYear()+a.getMonth()+a.getDate()+a.getHours()+a.getMinutes(),c="/api/loginInfo";function e(q,p,r){window.location.reload(true)}function i(){j.fire("login.log")}function b(p,q){}var f={registerLink:"http://zhidao.baidu.com/misc/more/userreg?oldurl="+escape(top.location.href),onLoginSuccess:e,onLoginFailure:i,onSubmitedErr:b,cache:true,tangram:true,apiOpt:{product:"ik",charset:"GBK",u:window.top.location.href,staticPage:"http://zhidao.baidu.com"+m.v3Jump},authsite:["renren","tsina","fetion"],authsiteCfg:{tpl:"ik",display:"popup",u:window.top.location.href,jumpUrl:"http://zhidao.baidu.com"+m.xd,onBindSuccess:function(r,p){if(p&&p.isFirstBind){j.fire("dialog.close");var q=new k({contentType:"frame",content:m.bindok+"?"+p.osType,titleText:"�ٶ�֪���������վ��ͬ������",width:450,height:215});q.render();q.open()}else{f.onLoginSuccess()}return false},onBindFailure:function(){f.onSubmitedErr();return false}},onshow:function(){}};j.on("login.log",function(q){var p=q&&g.isFunction(q.onLoginSuccess)?q.onLoginSuccess:f.onLoginSuccess;f.onLoginSuccess=function(r){j.fire("dialog.close");if(p!=e){j.fire("login.check",{isLogin:p,noLogin:function(){}})}else{p()}r.returnValue=false};if(!n){g.sio(l).callByBrowser(function(){o=passport.pop.init(f);o.show();g.extend(h,o)});n=true}else{if(o){o.show()}}});j.on("login._success",function(){f.onLoginSuccess()});j.on("login.setUsername",function(p){if(!p.onSetSuccess){p.onSetSuccess=function(){window.location.reload(true)}}f.onLoginSuccess=p.onSetSuccess;var r="?"+(p.patch?p.patch+"&":"")+"t="+(new Date()).getTime();function q(){var s=new k({contentType:"frame",content:m.username+r,titleText:p.titleText||"�㻹û���û�����һ��������û���ɣ�",width:430,height:170,autoDisplose:true});j.on("setusername.update",function(u,t){s&&s.setSize({width:t.width,height:t.height});g(s.getElement("content")).css("height",g(s.getElement("body")).css("height"))})}j.fire("login.check",{isLogin:function(){var s=F.context("user")||{};if(s.isNoUserName){q()}else{p.onSetSuccess()}},noLogin:function(){j.fire("login.log",{onLoginSuccess:q})}})});j.on("login.check",function(p){p=p||{};f.onLoginSuccess=p.isLogin||e;f.onLoginFailure=p.noLogin||i;g.get(c+"?t="+(new Date()).getTime(),function(t,r,v){var s=F.context("user")||{},q=g.json.parse(v.responseText);if(q.isLogin==1){s.isLogin=true;s.id=q.userId;s.securemobil=q.mobile;f.onLoginSuccess(q)}else{s.isLogin=false;f.onLoginFailure()}return true})});j.on("dialog.close",function(){if(o&&o.hide){o.hide()}});return h},["/static/common/lib/tangram/base/base.js","/static/common/ui/event/event.js","/static/common/ui/dialog/dialog.js","/static/common/ui/uri/uri.js"]);F.module("/static/common/ui/msg/msg.js",function(l,E){var e=l("/static/common/lib/tangram/base/base.js");var n=l("/static/common/ui/store/store.js");var h=l("/static/common/ui/log/log.js");var g=l("/static/common/ui/event/event.js");var A=l("/static/common/ui/tip/tip.js");l("/static/common/ui/tip/move/move.js");var a="http://msg.zhidao.baidu.com/",s="/s/toutu/promotion.js",B=(new Date()).getTime(),x=180,o=0,r=3,p=false,t=null,j=null,D=null,v=Boolean(F.context("user").isLogin),k="/question/{$qid}.html",i="/uhome/index#msg",w="/uhome/index#",q="/s/history/",f=document.title;var C={"1001":{title:"{$n}���������»ش�",url1:w+"ask",url2:k+"?sort=6#answer-{$aid}"},"1003":{title:"{$n}����������",url1:"/team/view/{$tname}#manage-3",url2:"/team/view/{$tname}#manage-3"},"1013":{title:"{$n}��ͬ�����»ش�",url1:w+"ask-2",url2:k+"?sort=6#answer-{$aid}"},"1006":{title:"{$n}���ش�����׷��",url1:w+"answer",url2:k+"#replyask-{$aid}"},"1010":{title:"{$n}�����ʵõ�����",url1:w+"answer",url2:k},"1009":{title:"{$n}���ش𱻲���",url1:w+"answer-2",url2:k},"1018":{title:"{$n}���ش��Ƽ�",url1:w+"answer-2",url2:k},"1007":{title:"{$n}���ش�����",url1:w+"comment",url2:k+"?oldq=1&from=commentTo#answer-{$aid}"},"1008":{title:"{$n}���ش���ͬ",url1:w+"evaluate",url2:k+"?oldq=1&from=evaluateTo#answer-{$aid}"},"1002":{title:"{$n}λ֪����������",url1:w+"help",url2:k},"1005":{title:"{$n}���Ŷ�����",url1:"/team",url2:"/team/view/{$tname}#question-3"},"1012":{title:"{$n}���¶�̬",url1:w+"score-2",url2:w+"score-2"},"1019":{title:"{$n}����֪ͨ",url1:w+"msg",url2:w+"msg"},"1020":{title:"{$n}���ش��Ƽ�Ϊ����",url1:w+"answer",url2:k}};var d={cookieName:"IK_MSG_POPUP",getCms:function(){e.ajax({url:s,dataType:"json",success:function(G){if(G){d.show(G,"cms")}}})},setCookie:function(G){e.cookie.set(d.cookieName,G.id,{expires:e.date.parse(G.endTime).getTime(),path:"/"})},generateView:function(H){var G=[];H.linkText=H.linkText||"����ר��";G.push('<a target="_blank"  href="'+H.linkUrl+'"><img class="task-guide-image" src="'+H.imageUrl+'" /></a>');G.push('<span class="task-guide-title">'+H.titleText+"</span>");G.push('<div class="task-guide-text">'+H.contextText+"</div>");G.push('<div class="task-guide-link"><a target="_blank" href="'+H.linkUrl+'">'+H.linkText+"</a></div>");return G.join("")},show:function(I,H){var G=H||"msg";if(G=="msg"){I=e.array(I).find(d.Validate);if(!I){return}else{E.del({type:"2040"},false)}}else{if(G=="cms"){if(!d.Validate(I)){return}}}j=new A({width:"240",skin:"task-guide",direction:"up",arrow:false,radius:false,closebox:true,content:d.generateView(I),effect:"move",onshow:function(){},onclose:function(){if(G=="cms"){d.setCookie(I)}},onhide:function(){if(G=="cms"){d.setCookie(I)}}});j.setPosition=function(){var J=this.getTipContainer();e(J).removeClass("ik-tip").css({right:3,bottom:3,left:"",overflow:""}).find("a.tip-close").empty()};j.show();e(j.getTipContainer()).delegate("a","click",function(J){j.hide();if(J.target.nodeName.toLowerCase()=="img"){h.send({type:2031,page:"bubble",pos:"bubble-img"})}else{if(e(J.target).hasClass("tip-close")){h.send({type:2031,page:"bubble",pos:"bubble-close"})}else{h.send({type:2031,page:"bubble",pos:"bubble-link"})}}})},Validate:function(I){var G=e.date.parse(I.startTime),J=e.date.parse(I.endTime),H=e.cookie.get(d.cookieName);if(I.enabled==1&&H!=I.id&&(new Date()).getTime()>=G.getTime()&&(new Date()).getTime()<J.getTime()){return true}return false}};var m={getServerData:function(H){var G=a+"api?source=iknow&t="+(new Date()).getTime();G+="&cu="+encodeURIComponent(F.context("user").name);if(H&&H.fr){G+="&"+e.url.jsonToQuery(H)}e.sio(G).callByServer(function(I){E.refresh(I)})},delServerData:function(H){var G=a+"close_notice?t="+(new Date()).getTime();G+="&"+e.url.jsonToQuery(H);e.sio(G).callByBrowser()},setLocalData:function(G){n.set("ikmsg_time",(new Date()).getTime());n.set("ikmsg_data",e.json.stringify(G))},getLocalData:function(){return{time:n.get("ikmsg_time")||0,data:e.json.parse(n.get("ikmsg_data")||"null")}},delLocalData:function(I){var G=[];var J=this.getLocalData();if(J&&(J=J.data)){if(J.actList){for(var H=0;H<J.actList.length;H++){if(J.actList[H].type==I.type){G=J.actList.splice(H,1);break}}}if(J.globalList&&J.globalList.type==I.type){J.globalList.data=null}}E.refresh(J);return G},clearLocalData:function(){n.remove("ikmsg_data");n.remove("ikmsg_time");this.delServerData({type:"99999",count:1})},_buildMsg:function(J){var I=[];var G="",H="";G=' alog-alias="'+J.type+'-title"';H=' alog-action="'+J.type+'-close"';I.push('<a target="_blank" href="'+J.url+'"'+G+' index="'+J.type+'"><i'+H+'></i><span id="notice-'+J.type+'">'+J.title+"</span></a>");return I},show:function(G){this.generateView(G)},hideTip:function(){if(t){e(t.getTipContainer()).hide()}},showTip:function(){if(t){e(t.getTipContainer()).show()}},generateView:function(N){var G=[],L=[],J=[];var K=this;var M=0;e.forEach(N,function(R,Q){var P=C[R.type];if(P){var S=P.title.replace("{$n}",'<span class="num">'+R.count+"</span>");var O=(R.count>1)?(P.url1):(P.url2.replace("{$qid}",R.qid).replace("{$aid}",R.aid));if(R.type=="1005"||R.type=="1003"){O=O.replace("{$tname}",R.tname)}R.url=O;R.title=S;R.index=Q;(M<r)?(G.push(m._buildMsg(R))):(L.push(m._buildMsg(R)));M++;J.push(R.type)}});if(G.length<=0){if(t){t.dispose();t=null}return}h.send({type:2031,pos:"msg-show",page:"msg",msgtype:J.join("|")});if(!t){t=new A({width:182,direction:"down",target:"user-name",closebox:true,shadow:true,skin:"nav-notice",onclose:function(){h.send({type:2031,page:"msg",pos:"msg-close"});m.clearLocalData();this.dispose();t=null}});var I=t.getTipBody();e(I).click(function(R){var O={};var Q=R.target.nodeName.toLowerCase();if(Q=="i"){e.event.stopPropagation(R);e.event.preventDefault(R);O.pos="msg-del"}else{O.pos="msg-title"}var P=e(R.target).closest("a").attr("index");if(P){O.actType=P;if(O){h.send(e.object.extend(O,{type:2031,page:"msg"}))}document.title=f;E.del({type:P})}})}e(t.getTipContainer()).removeClass("ik-tip").find("a.tip-close").empty();var I=t.getTipBody();e(I).empty().append(G.join(""));K.generateMore(I,L.join(""));t.show();g.fire("tip.resize");var H=e(I).find("a").each(function(P,Q){var R=(Q.href+top.location.href).match(/uhome/ig);var O,S;if(R&&R.length>1){O=Q.href;S=O.substr(O.lastIndexOf("#"));O=O.replace(/(&t=\d+)*#.+$/g,"")+"&t="+(new Date()).getTime();if(O.indexOf("?")==-1){O=O.replace(/&/,"?")}Q.href=O+S;Q.target="_top"}else{Q.target="_blank"}})},generateMore:function(G,H){if(e.string(H).trim()!=""){e(t.getTipContainer()).removeClass("nav-notice-small");e(G).append('<div id="more-notice-holder" style="display:none;">'+H+"</div>");if(p){e("#more-notice-holder").show()}if(!e("#more-control-div").size()){e(G).after('<div id="more-control-div"><a href="###" id="more-control-a" class="open"></a></div>');e("#more-control-div").click(function(J){e.event.preventDefault(J);var I=e(this).find("a").first();if(I.hasClass("open")){e.fx.expand("more-notice-holder",{duration:150,onafterfinish:function(){e(I).removeClass("open").addClass("close");p=true;h.send({type:2031,page:"msg",pos:"msg-expand"})}})}else{if(I.hasClass("close")){e.fx.collapse("more-notice-holder",{duration:150,onafterfinish:function(){e(I).removeClass("close").addClass("open");p=false;h.send({type:2031,page:"msg",pos:"msg-collapse"})}})}}})}}else{e("#more-control-div").remove();e("#more-notice-holder").remove();p=false;e(t.getTipContainer()).addClass("nav-notice-small")}}};function z(J){if(!v){return}var K=(B+x*1000<(new Date()).getTime())?true:false;var I=true;var G;var H=m.getLocalData();if(H&&H.data){if(H.data.interval){G=H.data.interval}if(H.time&&(K||o||H.time>(new Date()).getTime()-G*1000)){u(H.data);I=false}}if(I){m.getServerData()}if(!J&&G){clearTimeout(D);D=setTimeout(z,G*1000)}}function c(K,J){var H=J||true;var G=m.delLocalData(K);if(H&&G.length>0){var I={type:G[0].type,id:G[0].id,count:G[0].count};m.delServerData(I)}}function u(G){if(!G||G.status!=0){return}if(G.globalList&&G.globalList.type=="2040"&&G.globalList.data){d.show(G.globalList.data)}if(G.actList&&e.lang.isArray(G.actList)){m.show(G.actList)}else{document.title=f}}g.on("pop.resize",function(){if(j){var H=j.getTipContainer();if(e.browser.ie&&e.browser.ie<7){var I=(document.documentElement.clientHeight+document.documentElement.scrollTop);var G=e(H).outerHeight();I=(I-G-3)+"px";e(H).css({top:I,right:"5px",position:"absolute",overflow:""})}else{e(H).css({bottom:"3px",right:"3px",position:"fixed",overflow:""})}}});g.on("tip.resize",function(){if(t){var H=e("#user-name");var G=t.getTipContainer();var I=e(G).find(".tip-arrow");if(!(H&&G)||b){return false}var K=e(H).offset();var J=e.page.getScrollTop();if(J>K.top+27){if(e.browser.ie&&e.browser.ie<7){e(G).css({left:K.left+"px",top:(J+1)+"px"})}else{e(G).css({left:K.left+"px",top:"1px",position:"fixed"})}e(I).hide()}else{K.top+=27;e(G).css({left:K.left+"px",top:K.top+"px",position:"absolute"});e(I).show()}}});var b=false;g.on("userbar.show",function(G){b=G.waiting;E.hide()});g.on("userbar.hide",function(G){b=G.waiting;E.resize();E.show()});g.on("userbar.reposition",function(G){b=G.waiting;E.resize();E.show()});function y(H){if(e.isObject(H)){e.object.extend(option,H)}e.on(window,"resize",function(){E.resize()});e.on(window,"scroll",function(){E.resize()});if(!v){d.getCms();return}if(e("#userbar #user-name").size()==0){return}var J={},G=location.pathname+location.search,I;if(I=G.match(/^\/question\/(\d+)/i)){J.fr="question";J.qid=I[1];m.getServerData(J)}else{z()}e.on(document,"mousemove",function(){B=(new Date()).getTime()})}e.object.extend(E,{init:y,show:m.showTip,hide:m.hideTip,del:c,resize:function(){g.fire("tip.resize");g.fire("pop.resize")},force:function(){},refresh:function(G){m.setLocalData(G);z()}});return E},["/static/common/lib/tangram/base/base.js","/static/common/ui/store/store.js","/static/common/ui/log/log.js","/static/common/ui/event/event.js","/static/common/ui/tip/tip.js","/static/common/ui/tip/move/move.js"]);F.module("/static/common/ui/search-box/search-box.js",function(a,e){var c=a("/static/common/lib/tangram/base/base.js");var d=a("/static/common/ui/log/log.js");var i=a("/static/common/ui/event/event.js");var l=a("/static/common/ui/dialog/dialog.js");var g=a("/static/common/ui/form/form.js");var n=a("/static/common/ui/suggestion/suggestion.js");var f=a("/static/common/ui/util/util.js");var b={lm:0,rn:10,pn:0,fr:"search",ie:"gbk"},k=c("#kw");c("#search-form").submit(function(o){d.send({type:2014,pms:"newqb",action:"searchbtn"});e.search(k);o.preventDefault()});c("#ask-btn").click(function(o){d.send({type:2014,pms:"newqb",action:"askbtn"});e.ask(k);o.preventDefault()});c("#answer-btn").click(function(o){d.send({type:2014,pms:"newqb",action:"answerbtn"});e.answer(k)});k.focus(function(o){n.init("kw")}).blur(function(o){j(this)});i.fire("log.init",{key:2012,query:"#search-box a"});e.search=function(p){p=c(c.isString(p)?"#"+p:p);var o=c.string(p.val()).trim();if(o==""){i.fire("searchBox.buttonAction",{text:"��������Ҫ����������",evtName:"searchAction",log:"btn=search",fr:"search_0"})}else{i.fire("searchBox.searchAction",{params:{word:o}})}};e.ask=function(p){p=c(c.isString(p)?"#"+p:p);var o=new g({method:"get",action:"/new",input:{word:p.val(),ie:"GBK"}});o.submit()};e.answer=function(p){p=c(c.isString(p)?"#"+p:p);var o=c.string(p.val()).trim();if(o==""){i.fire("searchBox.buttonAction",{text:"������ؼ�ʣ����������Ȥ������",textBottom:"�ڴ���Ļش�",evtName:"answerAction",log:"btn=answersearch",lm:65536,fr:"answersearch_0"})}else{i.fire("searchBox.searchAction",{params:{word:o,lm:65536,fr:"answersearch"}})}};i.on("searchBox.buttonAction",function(q,p){var o='<div style="background: url(http://img.baidu.com/img/iknow/noteicon.gif) no-repeat scroll 0pt 0pt transparent; padding: 4px 0pt 8px 24px; margin-top:10px; font-size: 14px;">'+p.text+'��</div><input style="width: 300px; font-size: 16px; padding: 1px 0pt;" id="search-empty-input" type="text"/>';var r=new l({titleText:"֪����ʾ",content:o,width:370,height:175,autoDispose:true,submitOnEnter:true,autoRender:false,buttons:{items:[{text:"��������",click:function(){var s=c.string(c("#search-empty-input").val()).trim();if(s!=""){i.fire("searchBox.searchAction",{params:{word:s,fr:p.fr,lm:p.lm||0}})}}}],align:"left",enable:true}});r.on("load",function(t){c("#search-empty-input").focus();var s=c("<span/>").html(p.textBottom||"").css({"padding-left":"10px","font-size":"12px"});c(this.getElement("footerContainer")).append(s)});r.render()});var h={};i.on("searchBox.addLog",function(p,o){c.extend(h,o)});i.on("searchBox.searchAction",function(r,q){d.send(c.extend({type:2057,fr:m()},h));h={};var o={};c.extend(o,b);c.extend(o,q.params);var p=new g({method:"get",action:"/search",input:o});setTimeout(function(){p.submit()},60)});function m(){var p=location.pathname,o=p=="/"?"home":p.match(/\w+/)[0];if(new RegExp("\\|"+o+"\\|").test("|search|question|home|browse|")){return o}else{return"other"}}function j(r){var q={"http://news.baidu.com/":{query:"ns?cl=2&rn=20&tn=news&t=1&word=#{0}"},"http://www.baidu.com/":{query:"s?cl=3&wd=#{0}"},"http://tieba.baidu.com/":{query:"f?kw=#{0}&t=4"},"http://music.baidu.com/":{query:"search?fr=zhidao&key=#{0}"},"http://image.baidu.com/":{query:"i?tn=baiduimage&ct=201326592&lm=-1&cl=2&word=#{0}&t=3"},"http://video.baidu.com/":{query:"v?ct=301989888&rn=20&pn=0&db=0&s=22&word=#{0}"},"http://map.baidu.com/":{query:"m?word=#{0}&fr=map007",encode:true},"http://baike.baidu.com/":{query:"searchword/?word=#{0}&pic=1"},"http://wenku.baidu.com/":{query:"search?word=#{0}&lm=0&od=0"},"http://jingyan.baidu.com/":{query:"search?word=#{0}&fr=zhidao",encode:true}};var p=c.string(r.value).trim();c.dom("#search-box .channel a").each(function(){var o="http://"+this.hostname+"/";if(p!=""){if(q[o]){var t=q[o];var s=t.encode?encodeURIComponent(p):p;this.href=o+c.string(t.query).format([s])}}else{this.href=o}})}return e},["/static/common/lib/tangram/base/base.js","/static/common/ui/log/log.js","/static/common/ui/event/event.js","/static/common/ui/dialog/dialog.js","/static/common/ui/form/form.js","/static/common/ui/suggestion/suggestion.js","/static/common/ui/util/util.js"]);F.module("/static/common/ui/set-care-field/set-care-field.js",function(require,exports){var T=require("/static/common/lib/tangram/base/base.js");require("/static/common/ui/baidu/baidu.js");var Dialog=require("/static/common/ui/dialog/dialog.js");var Category=require("/static/common/ui/category/category.js");var ec=require("/static/common/ui/event/event.js");var login=require("/static/common/ui/login/login.js");var SetCareField=T.createClass(function(){var defaultOptions={_maxKeywordNum:20,_maxKeywordLength:20,_maxCidNum:5,selectSize:7,expand:"all",defaultKeyword:"",defaultCid:"",onclose:function(data){if(me.tag){window.location.reload(true)}}};var options={};var me=this;var _dialog;me.tag=false;var msg={key:{noWord:"��������Ĺؼ�ʣ�",tooLong:"������Ĺؼ��̫���������¼���°ɣ�",exist:"������Ĺؼ���Ѿ���ӹ��ˣ���Ҫ�ظ����Ŷ��",wordTip:"������趨 <b>"+defaultOptions._maxKeywordNum+'</b> ��ؼ�ʣ���һ���а����ؼ�ʣ����ÿո�ָ�������"���� ����"',enough:"���ע�Ĺؼ�ʸ����Ѵﵽ���ޣ���ɾ���������ӣ�",error:"�ܱ�Ǹû�����ɹ��������Կ��ɣ�"},cat:{noCid:"����ѡ���ѡ����࣡",exist:"��ѡ��ķ����Ѿ���ӹ��ˣ���Ҫ�ظ����Ŷ��",addTip:"������趨<b>"+defaultOptions._maxCidNum+"</b>�����࣡",enough:"��ע��������ɾ������Լ�����ӡ�",wordTip:"�㻹û����ӷ��࣬�����Ӱ�ť��Ӱɣ�",error:"�ܱ�Ǹû�����ɹ��������Կ��ɣ�"}};me._keywords=[];me._cids=[];me._recWords=[];me._wordSpan=new T.string('<a href="#" class="wordSpan" word="#{word}"><span>#{word}</span><i></i></a>');me._recWordSpan=new T.string('<a href="#" class="recWordSpan #{addTag}" recWord="#{recWord}"><span><span class="ad"></span>#{recWord}</span></a>');me._careSpan=new T.string('<a href="#" class="careSpan" cid="#{cid}"><span>#{text}</span><i></i></a>');function _resize(){_dialog.setSize({width:520,height:(T("#setCareField-wrap").height()+60)})}function _initHtml(keywords,categorys){function parseCategorys(){var _html="";me._cids=[];for(var i=0;i<categorys.length;i++){me._cids.push(categorys[i]);_html+=me._careSpan.format({cid:categorys[i][0],text:categorys[i][1].split(",").reverse().join('<span class="split">></span>')})}T("#careList").html(_html)}function parseKeywords(){var _html="";me._keywords=[];for(var i=0;i<keywords.length;i++){keywords[i]=keywords[i].replace(/&lt;/g,"<").replace(/&gt;/g,">");me._keywords.push(keywords[i]);_html+=me._wordSpan.format({word:T.string(keywords[i]).encodeHTML()})}T("#wordList").html(_html+'<div style="clear:both"></div>')}parseKeywords();parseCategorys();_checkKeyword();_checkCid();_initRecWord(me._recWords);_resize();_dialog.center();T("#addCareBtnAdd").css("top",(options.selectSize/2*17-4)+"px");T("#addCareBtnDel").css("top",(options.selectSize/2*17-4)+"px");T(".cate-splitor").css("top","-"+(options.selectSize/2*17-13)+"px")}function _initRecWord(data){if(data){var _html="";for(var i=0;i<data.length;i++){data[i]=data[i].replace(/&lt;/g,"<").replace(/&gt;/g,">");_html+=me._recWordSpan.format({recWord:data[i],addTag:_checkRecIscared(data[i])?"added":"add"})}T("#recWordsList").html(_html+'<div style="clear:both"></div>')}}function _Submit(keywords,cids,success,error){if(!error){error=function(){}}if(!success){success=function(){}}var temp=[];for(var i=0;i<cids.length;i++){temp.push(cids[i][0])}var idStr=temp.join("_");var kwStr="";for(var i=0;i<keywords.length;i++){var decode=T.string.decodeHTML(keywords[i]);kwStr+="&kw"+i+"="+encodeURIComponent(decode)}if(keywords.length!=0){kwStr+="&kwn="+keywords.length}var url="cm=100522&word="+idStr+kwStr;T.ajax({url:"/submit/user",data:url,type:"POST",dataType:"text",success:function(data){if(data){var backData=eval("("+data+")");if(backData.errorNo=="0"){me._keywords=[];for(var i=0;i<keywords.length;i++){me._keywords.push(keywords[i])}me._cids=[];for(var i=0;i<cids.length;i++){me._cids.push(cids[i])}_checkKeyword();_checkCid();_initRecWord(me._recWords);me.tag=true;success()}else{error()}}else{error()}_resize()},error:error})}function _checkRecIscared(rec){for(var i=0;i<me._keywords.length;i++){if(me._keywords[i]==rec){return true}}return false}function _delKeyword($WordSpan){tempKeywords=[];for(i=0;i<me._keywords.length;i++){if($WordSpan.attr("word")!=me._keywords[i]){tempKeywords.push(me._keywords[i])}}_Submit(tempKeywords,me._cids,function(){$WordSpan.remove();_resize()},function(){T("#addWordTip").html(msg.key.error).show();_resize()})}function _addKeyword(word){if(!(word=T.string(word||"").trim())){T("#addWordTip").html(msg.key.noWord).show();_resize();return}tempKeywords=[];for(i=0;i<me._keywords.length;i++){tempKeywords.push(me._keywords[i])}if(word){word=word.replace(/&lt;/g,"<").replace(/&gt;/g,">");if(_checkKeyword(word)){tempKeywords.push(word);_Submit(tempKeywords,me._cids,function(){T(me._wordSpan.format({word:T.string(word).encodeHTML()})).insertBefore(T("#wordList div")[0]);T("#wordInput").val("");T("#wordInput").trigger("blur");_resize()},function(){T("#addWordTip").html(msg.key.error).show();_resize()})}}}function _delCid($CidSpan){tempCids=[];for(i=0;i<me._cids.length;i++){if($CidSpan.attr("cid")!=me._cids[i][0]){tempCids.push(me._cids[i])}}_Submit(me._keywords,tempCids,function(){$CidSpan.remove();_resize()},function(){T("#addCareTip").html(msg.cat.error).show();_resize()})}function _addCid(cid){tempCids=[];for(i=0;i<me._cids.length;i++){tempCids.push(me._cids[i])}if(cid){if(_checkCid(cid[0])){tempCids.push(cid);_Submit(me._keywords,tempCids,function(){var text=cid[1].split(",").reverse().join('<span class="split">></span>');T(me._careSpan.format({cid:cid[0],text:text})).appendTo("#careList");T("#care-wrap-addBtn").hide();T("#addCareBtn").show();_resize()},function(){T("#addCareTip").html(msg.cat.error).show();_resize()})}}}function _checkKeyword(word){tag=true;if(word&&word!=""){word=T.string(word).trim();if(word.length==0||word=="�������ó��Ĺؼ��"){T("#addWordTip").html(msg.key.noWord).show();tag=false}else{if(T.string.getByteLength(word)>20){T("#addWordTip").html(msg.key.tooLong).show();tag=false}else{for(var i=0;i<me._keywords.length;i++){if(me._keywords[i]==word){T("#addWordTip").html(msg.key.exist).show();tag=false}}}}if(me._keywords.length==0){T("#wordList").html('<div style="clear:both"></div>')}}else{if(me._keywords.length>=defaultOptions._maxKeywordNum){T("#word-wrap-btn").hide();T("#wordTip").html(msg.key.enough).show();tag=false}else{T("#word-wrap-btn").show();T("#wordTip").html("").hide()}if(me._keywords.length==0){T("#wordList-title").html("");T("#wordList").html(msg.key.wordTip)}else{T("#wordList-title").html("����ӵĹؼ��")}T("#addWordTip").html("").hide()}if(tag){T("#addWordTip").html("").hide()}_resize();return tag}function _checkCid(cid){tag=true;if(cid&&cid!=0){if(cid.length==0){T("#addCareTip").html(msg.cat.noCid).show();tag=false}else{for(var i=0;i<me._cids.length;i++){if(me._cids[i][0]==cid){T("#addCareTip").html(msg.cat.exist).show();tag=false}}}if(me._cids.length==0){T("#careList").html("")}}else{if(me._cids.length>=defaultOptions._maxCidNum){T("#care-wrap-btn").hide();T("#careTip").html(msg.cat.enough).show();tag=false}else{T("#care-wrap-btn").show();T("#careTip").html("").hide()}if(me._cids.length==0){T("#careList-title").html("");T("#careList").html(msg.cat.wordTip)}else{T("#careList-title").html("����ӵķ���")}T("#addCareTip").html("").hide()}if(tag){T("#addCareTip").html("").hide()}_resize();return tag}function dialogBind(){T(window).on("resize",function(){_dialog.center()});T("#setCareField-wrap").click(function(event){event.preventDefault()});T("#setCareField-wrap").mouseover(function(event){var item=T(event.target);if(item.is("i")){item.addClass("ihover")}});T("#setCareField-wrap").mouseout(function(event){var item=T(event.target);if(item.is("i")){item.removeClass("ihover")}});T("#care-wrap-addBtn").mouseenter(function(){T(this).addClass("hover")});T("#care-wrap-addBtn").mouseleave(function(){T(this).removeClass("hover")});T("#keyWord-header").click(function(e){if(T(this).attr("ishide")){T(this).attr("ishide","").removeClass("headerClose").next().show()}else{T(this).attr("ishide","true").addClass("headerClose").next().hide()}_resize()});T("#category-header").click(function(e){if(T(this).attr("ishide")){T(this).attr("ishide","").removeClass("headerClose").next().show()}else{T(this).attr("ishide","true").addClass("headerClose").next().hide()}_resize()});T("#wordList").on("click",function(event){var span=T(event.target);if(span.is("i")&&span.parent().hasClass("wordSpan")){_delKeyword(span.parent())}});T("#careList").on("click",function(event){var span=T(event.target);if(span.is("i")&&span.parent().hasClass("careSpan")){_delCid(span.parent())}});T("#addWordBtn").on("click",function(event){_addKeyword(T("#wordInput").val())});T("#recWordsList").on("click",function(event){var span=T(event.target);if(span.parent().hasClass("recWordSpan add")){_addKeyword(span.parent().attr("recword"))}else{if(span.hasClass("recWordSpan add")){_addKeyword(span.attr("recword"))}else{if(span.parent().parent().hasClass("recWordSpan add")){_addKeyword(span.parent().parent().attr("recword"))}}}});T("#wordInput").on("focus",function(event){if(T("#wordInput").val()=="�������ó��Ĺؼ��"){T("#wordInput").val("").css("color","#333333")}});T("#wordInput").on("blur",function(event){if(T("#wordInput").val()==""){T("#wordInput").val("�������ó��Ĺؼ��").css("color","#b3b3b3")}});T("#addCareBtn").on("click",function(event){T("#care-wrap-addBtn").show();if(options.defaultCid){setTimeout(function(){_dialog.cat.setValue(options.defaultCid);options.defaultCid=null},500)}T(this).hide();_resize()});T("#addCareBtnAdd").on("click",function(event){var cid=[];var temp=_dialog.cat.getValue();if(temp){cid.push(temp.cid);cid.push(temp.arrName.reverse().join(","))}if(temp.cid){_addCid(cid)}else{T("#care-wrap-addBtn").hide();T("#addCareBtn").show();_resize()}});T("#addCareBtnDel").on("click",function(event){T("#care-wrap-addBtn").hide();T("#addCareBtn").show();_resize()})}me.init=function(_options){me.tag=false;ec.fire("login.check",{isLogin:function(){_init()},noLogin:function(){ec.fire("login.log")}});function _init(){options=T.object.extend(defaultOptions,_options);T.forEach(options,function(item,key){T.isFunction(item)?me.on(key,item):me[key]=item});var html='<div id="setCareField-wrap"><div id="keyWord-wrap" class="wrap"><div id="keyWord-header" class="header"><span>�ҹ�ע�Ĺؼ��</span></div><div id="keyWord-body" class="body"><div id="wordList-title">����ӵĹؼ��</div><div id="wordList"></div><div style="clear:both"></div><span class="alert" id="addWordTip">��ӹؼ��ʧ��</span><div id="word-wrap-btn"><div id="word-wrap-addBtn"><input type="text" id="wordInput" value="�������ó��Ĺؼ��" /><a type="button" id="addWordBtn" href="#"></a></div><div id="recWordsList"></div></div><div style="clear:both"></div><div id="wordTip" class="tip">���ע�Ĺؼ�ʸ����Ѵﵽ���ޣ���ɾ����������</div></div></div><div id="category-wrap" class="wrap"><div id="category-header" class="header"><span>�ҹ�ע�ķ���</span></div><div id="category-body" class="body"><div id="careList-title">����ӵķ���</div><div id="careList"></div><div id="care-wrap-btn"><div id="care-wrap-addBtn"><div id="addCareBtnAdd"><a href="#"></a></div><div id="addCareBtnDel"><a href="#"></a></div></div><div id="addCareBtn"><a href="#"></a></div></div><div style="clear:both"></div><span class="alert" id="addCareTip">��ӹؼ��ʧ��</span><div id="careTip" class="tip">���ע�Ĺؼ�ʸ����Ѵﵽ���ޣ���ɾ����������</div></div></div></div>';_dialog=new Dialog({titleText:"���ù�ע����",content:html,contentType:"html",autoDispose:true,width:520,onhide:function(){var data={keywords:me._keywords,cids:me._cids};options.onclose(data)}});_dialog.cat=new Category({target:"care-wrap-addBtn",selectSize:options.selectSize,splitor:"<span>&gt</span>"});dialogBind();T.sio("/ucenter/api/uccarefieldpop?t="+(new Date()).getTime()).callByServer(function(data){if(!data){_initHtml([],[]);return}_initHtml(data.keyword,data.category)});me._recWords=[];_checkKeyword();_checkCid();_initRecWord(me._recWords);_resize();_dialog.center();if(options.defaultKeyword!=""){T("#wordInput").trigger("focus").val(options.defaultKeyword)}if(options.defaultCid){T("#addCareBtn").trigger("click")}var title="���ù�ע����";if(options.expand&&options.expand!="all"){T("#careList-title").show();T("#wordList-title").show();if(options.expand=="onlyCid"){title="���÷���";T("#category-wrap").show();T("#keyWord-header").show();T("#keyWord-wrap").hide();T("#category-header").hide()}else{if(options.expand=="onlyKey"){title="���ùؼ��";T("#keyWord-wrap").show();T("#category-header").show();T("#category-wrap").hide();T("#keyWord-header").hide()}}}else{T("#keyWord-wrap").show();T("#category-header").show();T("#category-wrap").show();T("#keyWord-header").show();T("#careList-title").hide();T("#wordList-title").hide()}_dialog.setTitleText(title)}}}).extend({});exports=SetCareField;return exports},["/static/common/lib/tangram/base/base.js","/static/common/ui/baidu/baidu.js","/static/common/ui/dialog/dialog.js","/static/common/ui/category/category.js","/static/common/ui/event/event.js","/static/common/ui/login/login.js"]);F.module("/static/common/ui/set-class/set-class.js",function(c,a){var b=c("/static/common/lib/tangram/base/base.js");var d=c("/static/common/ui/dialog/dialog.js");var e=c("/static/common/ui/category/category.js");var f=b.createClass(function(i){var j=this;var h=b.extend({type:"alert",contentType:"element",titleText:"���÷���",captionText:"",footText:"",width:480,height:415},i||{});var g=b('<div class="set-container"/>');b('<div class="set-caption"/>').appendTo(g).html(h.captionText);var k=b('<div class="set-category"/>').appendTo(g);j.category=new e({target:k,className:"set-class",defaultValue:h.defaultValue,onchange:h.onchange});b('<div class="set-footer"/>').appendTo(g).html(h.footText);h.content=g.get(0);j.instance=new d(h)}).extend({dispose:function(){var g=this.instance;b(g.getElement()).add(g._mask.getElement()).remove()},showMsg:function(h){var g=this.instance.getElement(),i=b(".set-footer .set-message",g);if(i.length){i.html(h)}else{b('<div class="set-message f-stress"/>').html(h).appendTo(b(".set-footer",g))}},getValue:function(){return this.category.getValue()}});a=f;return a},["/static/common/lib/tangram/base/base.js","/static/common/ui/dialog/dialog.js","/static/common/ui/category/category.js"]);F.module("/static/common/ui/store/store.js",function(d,h){var g=d("/static/common/lib/tangram/base/base.js");var k={},j=window,m=j.document,c="localStorage",o="globalStorage",f="__storejs__",i;k.disabled=false;k.set=function(e,p){};k.get=function(e){};k.remove=function(e){};k.clear=function(){};k.transact=function(e,p){var q=k.get(e);if(typeof q=="undefined"){q={}}p(q);k.set(e,q)};k.serialize=function(e){return g.json.stringify(e)};k.deserialize=function(e){if(typeof e!="string"){return undefined}return g.json.parse(e)};function b(){try{return(c in j&&j[c])}catch(e){return false}}function n(){try{return(o in j&&j[o]&&j[o][j.location.hostname])}catch(e){return false}}if(b()){i=j[c];k.set=function(e,p){i.setItem(e,k.serialize(p))};k.get=function(e){return k.deserialize(i.getItem(e))};k.remove=function(e){i.removeItem(e)};k.clear=function(){i.clear()}}else{if(n()){i=j[o][j.location.hostname];k.set=function(e,p){i[e]=k.serialize(p)};k.get=function(e){return k.deserialize(i[e]&&i[e].value)};k.remove=function(e){delete i[e]};k.clear=function(){for(var e in i){delete i[e]}}}else{if(m.documentElement.addBehavior){var i=m.createElement("div");function a(e){return function(){var q=Array.prototype.slice.call(arguments,0);q.unshift(i);m.body.appendChild(i);i.addBehavior("#default#userData");i.load(c);var p=e.apply(k,q);m.body.removeChild(i);return p}}k.set=a(function(q,e,p){q.setAttribute(e,k.serialize(p));q.save(c)});k.get=a(function(p,e){return k.deserialize(p.getAttribute(e))});k.remove=a(function(p,e){p.removeAttribute(e);p.save(c)});k.clear=a(function(r){var p=r.XMLDocument.documentElement.attributes;r.load(c);for(var q=0,e;e=p[q];q++){r.removeAttribute(e.name)}r.save(c)})}}}try{k.set(f,f);if(k.get(f)!=f){k.disabled=true}k.remove(f)}catch(l){k.disabled=true}h=k;return h},["/static/common/lib/tangram/base/base.js"]);F.module("/static/common/ui/submit/submit.js",function(e,b){var d=e("/static/common/lib/tangram/base/base.js");var a=e("/static/common/ui/dialog/dialog.js");var g=e("/static/common/ui/ut/ut.js");var c=e("/static/common/ui/event/event.js");var f=e("/static/common/ui/form/form.js");Submit=d.createClass(function(h){var j=this;c.fire("editor.default");var i={url:"/submit/ajax/",params:{ie:"UTF-8"},hasJump:false,autoRefresh:false,jumpSubmit:function(n,m,l){var k={name:j.guid+"_FORM_NAME",id:j.guid+"_FORM_ID",action:"/submit/",method:"post"};if(document.referrer!=""){k.action="/submit/?cm="+m.cm+"&fr="+encodeURIComponent(document.referrer)}else{k.action="/submit/?cm="+m.cm}new f(d.extend(d.extend(k,l||{}),{input:m})).submit()},errorDeal:function(l,k){k=k||{info:"�����쳣�������������ύ"};a.alert(k.info);if(i.autoRefresh){setTimeout(function(){window.location.reload(true)},3000)}}};d.forEach(d.extend(i,h),function(l,k){if(d.isFunction(l)){j.on(k,l)}});if(i.params){i.params.utdata=g.report()["c"]}if(i.syncId){if("undefined"===typeof j.syncIdMap[i.syncId]){j.syncIdMap[i.syncId]=false}if(j.syncIdMap[i.syncId]){return}else{j.syncIdMap[i.syncId]=true}}d.ajax(i.url,{type:i.method||"post",dataType:i.dataType||"json",data:i.params,success:function(m,l,k){if(i.syncId){j.syncIdMap[i.syncId]=false}if(m&&m.errorNo==0){if(j.fire("beforeJump",m.data)){if(i.hasJump){j.fire("jumpSubmit",m.data)}}}else{var n=m?m.data:"";if(j.fire("beforeError",n)){j.fire("errorDeal",n)}}},error:function(k,l,m){if(i.syncId){j.syncIdMap[i.syncId]=false}if(j.fire("error",m)){j.fire("errorDeal")}}})}).extend({syncIdMap:{}});b=Submit;return b},["/static/common/lib/tangram/base/base.js","/static/common/ui/dialog/dialog.js","/static/common/ui/ut/ut.js","/static/common/ui/event/event.js","/static/common/ui/form/form.js"]);F.module("/static/common/ui/suggestion/suggestion.js",function(d,a){var c=d("/static/common/lib/tangram/base/base.js");var b=d("/static/common/ui/event/event.js");var g=d("/static/common/lib/magic/magic.js");d("/static/common/lib/magic/setup/suggestion/suggestion.js");function e(k){var j=c.cookie.get("IK_SUG"),i=c.string(k).trim();if(j=="1"){return}if(i==""){return}var h="http://nssug.baidu.com/su?wd="+encodeURIComponent(i)+"&prod=zhidao&t="+(new Date()).getTime();c.sio(h).callByBrowser()}baidu=typeof(baidu)=="undefined"?{}:baidu;baidu.sug=function(j){var h=j.q;var i=j.s;a.instance.receiveData(h,i)};function f(h){var i=(h.value)||this.getInputValue();if(i!=""){b.fire("searchBox.searchAction",{params:{word:i,f:"sug",rsp:h.index}})}else{b.fire("searchBox.buttonAction",{text:"��������Ҫ����������",evtName:"searchAction",log:"btn=search",fr:"search_0"})}}a={instance:"",init:function(h){if(!a.instance){a.instance=g.setup.suggestion(h,{onconfirm:f,getData:e,appendHTML:'<span class="disable-sug">�ر�</span>',onbeforepick:function(i){if(c.isNumber(i.index)){var j=c("<div/>").html(i.value);this.currentData[i.index].value=j.text()}}});a.instance.on("show",function(j){var i=this;c(".disable-sug",i.getElement("append")).one("click",function(k){i.hide();c.cookie.set("IK_SUG","1")});c.forEach(this.getElements(),function(l,k){if(k.match(/^item\d+$/)){var m=c(l).text();m&&c(l).html(m.replace(i.currentQuery,"<em>"+i.currentQuery+"</em>"))}})})}}};return a},["/static/common/lib/tangram/base/base.js","/static/common/ui/event/event.js","/static/common/lib/magic/magic.js","/static/common/lib/magic/setup/suggestion/suggestion.js"]);F.module("/static/common/ui/template/template.js",function(c,b){var a=function(g,f){var e=(function(){if(!this.document){return a._compile(g)}var i=document.getElementById(g);if(i){if(a.cache[g]){return a.cache[g]}var h=/^(textarea|input)$/i.test(i.nodeName)?i.value:i.innerHTML;return a._compile(h)}else{return a._compile(g)}})();var d=a._isObject(f)?e(f):e;e=null;return d};a.cache={};a.LEFT_DELIMITER=a.LEFT_DELIMITER||"<%";a.RIGHT_DELIMITER=a.RIGHT_DELIMITER||"%>";a.ESCAPE=true;a._encodeHTML=function(d){return String(d).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")};a._encodeReg=function(d){return String(d).replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")};a._encodeEventHTML=function(d){return String(d).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")};a._compile=function(e){var d="var _template_fun_array=[];\nvar fn=(function(data){\nvar _template_varName='';\nfor(name in data){\n_template_varName+=('var '+name+'=data[\"'+name+'\"];');\n};\neval(_template_varName);\n_template_fun_array.push('"+a._analysisStr(e)+"');\n_template_varName=null;\n})(_template_object);\nfn = null;\nreturn _template_fun_array.join('');\n";return new Function("_template_object",d)};a._isObject=function(d){return"function"===typeof d||!!(d&&"object"===typeof d)};a._analysisStr=function(f){var d=a.LEFT_DELIMITER;var h=a.RIGHT_DELIMITER;var e=a._encodeReg(d);var g=a._encodeReg(h);f=String(f).replace(new RegExp("("+e+"[^"+g+"]*)//.*\n","g"),"$1").replace(new RegExp("<!--.*?-->","g"),"").replace(new RegExp(e+"\\*.*?\\*"+g,"g"),"").replace(new RegExp("[\\r\\t\\n]","g"),"").replace(new RegExp(e+"(?:(?!"+g+")[\\s\\S])*"+g+"|((?:(?!"+e+")[\\s\\S])+)","g"),function(j,i){var k="";if(i){k=i.replace(/\\/g,"&#92;").replace(/'/g,"&#39;");while(/<[^<]*?&#39;[^<]*?>/g.test(k)){k=k.replace(/(<[^<]*?)&#39;([^<]*?>)/g,"$1\r$2")}}else{k=j}return k}).replace(new RegExp("("+e+":?[hvu]?[\\s]*?=[\\s]*?[^;|"+g+"]*?);[\\s]*?"+g,"g"),"$1"+h).replace(new RegExp("("+e+"[\\s]*?var[\\s]*?.*?[\\s]*?[^;])[\\s]*?"+g,"g"),"$1;"+h).split(d).join("\t");if(a.ESCAPE){f=f.replace(new RegExp("\\t=(.*?)"+g,"g"),"',typeof($1) === 'undefined'?'':baiduTemplate._encodeHTML($1),'")}else{f=f.replace(new RegExp("\\t=(.*?)"+g,"g"),"',typeof($1) === 'undefined'?'':$1,'")}f=f.replace(new RegExp("\\t:h=(.*?)"+g,"g"),"',typeof($1) === 'undefined'?'':baiduTemplate._encodeHTML($1),'").replace(new RegExp("\\t(?::=|-)(.*?)"+g,"g"),"',typeof($1)==='undefined'?'':$1,'").replace(new RegExp("\\t:u=(.*?)"+g,"g"),"',typeof($1)==='undefined'?'':encodeURIComponent($1),'").replace(new RegExp("\\t:v=(.*?)"+g,"g"),"',typeof($1)==='undefined'?'':baiduTemplate._encodeEventHTML($1),'").split("\t").join("');").split(h).join("_template_fun_array.push('").split("\r").join("\\'");return f};window.baiduTemplate=a;a.LEFT_DELIMITER="<#";a.RIGHT_DELIMITER="#>";b=a;return b},[]);F.module("/static/common/ui/tip/tip.js",function(d,a){var c=d("/static/common/lib/tangram/base/base.js");var b=c.createClass(function(h){var f=c.extend({width:200,offset:[0,0],direction:"down",effect:"",skin:"",arrow:true,closebox:false,radius:true,shadow:true,target:""},h);var i=this,e="";this._status="hide";this.getTipContainer=function(){return c("#"+e).get(0)};this.getTipBody=function(){return c("#"+e+"-body").get(0)};this.getStatus=function(){return this._status};this.getProperties=function(){return f};function g(l){e=l+"-tip";var k=c("#"+e);if(!k.size()){k=c('<div id="'+e+'" class="ik-tip line" style="position: absolute; left: -9999px"></div>');var n=[];if(f.arrow){n.push('<div class="tip-arrow arrow-'+f.direction+'"><em></em><span></span></div>')}if(c.browser.ie&&c.browser.ie<9){n.push('<b class="tl"></b><b class="tr"></b><b class="bl"></b><b class="br"></b>')}if(f.closebox){n.push('<a href="#" class="tip-close" title="�ر�">\u00D7</a>')}n.push('<div class="tip-box"><div id="'+e+'-body" class="tip-body"></div></div>');k.append('<div class="tip-inner">'+n.join("")+"</div>").appendTo(document.body)}var m=j("tip-inner");f.skin&&k.addClass(f.skin);f.shadow&&m.addClass("ik-tip-shadow");f.radius&&m.addClass("ik-tip-radius");if(f.closebox){j("tip-close").click(function(o){if(i.fire("onclose")){i.hide()}o.preventDefault();return false})}}function j(k){return c.dom("."+k,i.getTipContainer())}this.setPosition=function(){if(!f.target){return}var l=c.isString(f.target)?c("#"+f.target):c(f.target);var m=l.offset();var k=c(this.getTipContainer());if(f.direction=="down"){m.top=m.top+parseInt(l.css("height"),10)+f.offset[1]+(f.arrow?10:0);m.left=m.left+f.offset[0]}if(f.direction=="up"){m.top=m.top-parseInt(k.css("height"),10)-f.offset[1]-(f.arrow?10:0);m.left=m.left+f.offset[0]}if(f.direction=="left"){m.top=m.top+f.offset[1];m.left=m.left-parseInt(k.css("width"),10)-f.offset[0]-(f.arrow?10:0)}if(f.direction=="right"){m.top=m.top+f.offset[1];m.left=m.left+parseInt(l.css("width"),10)+f.offset[0]+(f.arrow?10:0)}k.css(m)};this.setArrowPosition=function(k){j("tip-arrow").css(k)};this.update=function(m){c.extend(f,m||{});var l=this.getTipContainer(),k=this.getTipBody();c(l).css({width:parseInt(f.width,10)+"px"});f.height&&c(l).css({height:parseInt(f.height,10)+"px"});if(m&&m.content){c(k).empty().append(f.content)}this.fire("onupdate")};this.show=function(l){if(l){f.target=l}this.update();this.setPosition();var k=c(this.getTipContainer());f.height=k.outerHeight();k.hide();if(this.fire("onshow")){k.show();this._status="show"}};this.hide=function(){var k=c(this.getTipContainer());if(this.fire("onhide")){k.hide();this._status="hide";if(f.autoDispose){this.dispose()}}};this.dispose=function(){c(this.getTipContainer()).remove();this._status="disposed";b.prototype.dispose.call(this)};g(this.guid);c(this.getTipBody()).append(f.content);if(f.effect!==""&&this.effects[f.effect]){this.effects[f.effect].call(i,i)}c.forEach(f,function(l,k){if(c.isFunction(l)){i.on(k,l)}})});b.extend({effects:{},register:function(e){c.extend(this.effects,e)}});a=b;return a},["/static/common/lib/tangram/base/base.js"]);
F.module("/static/common/ui/tip/move/move.js",function(d,a){var c=d("/static/common/ui/tip/tip.js");var b=d("/static/common/lib/tangram/base/base.js");d("/static/common/ui/baidu/fx/fx.js");c.prototype.register({move:function(){var f=this.getProperties(),e=b(this.getTipContainer()),h=e.children().first(),g=this;this.on("onshow",function(i){if(f.direction=="up"){if(f.arrow){e.css({height:f.height})}h.css({position:"relative",top:f.height});e.show();b.fx.moveTo(h[0],[0,0],{duration:f.duration||300})}i.returnValue=false});this.on("onhide",function(i){if(f.direction=="up"){b.fx.moveTo(h[0],[0,f.height],{duration:f.duration||300,onafterfinish:function(){e.hide();f.autoDispose&&g.dispose()}})}i.returnValue=false})}});a=c;return a},["/static/common/ui/tip/tip.js","/static/common/lib/tangram/base/base.js","/static/common/ui/baidu/fx/fx.js"]);
F.module("/static/common/ui/tip/fade/fade.js",function(d,a){var c=d("/static/common/ui/tip/tip.js");var b=d("/static/common/lib/tangram/base/base.js");c.prototype.register({fade:function(){var f=this.getProperties(),e=this.getTipContainer();this.on("onshow",function(g){});this.on("onhide",function(g){})}});a=c;return a},["/static/common/ui/tip/tip.js","/static/common/lib/tangram/base/base.js"]);F.module("/static/common/ui/uri/uri.js",function(d,a){var c=d("/static/common/lib/tangram/base/base.js");var b={bindok:"/static/common/html/bindok_d6029611.html",carefield:"/static/common/html/carefield_8199b8ab.html",jump:"/static/common/html/jump_09d6f409.html",map:"/static/common/html/map_ee564071.html",qbasktoteam:"/static/common/html/qbasktoteam_0c8f30d2.html",username:"/static/common/html/username_b876a82f.html",v2Jump:"/static/common/html/v2Jump_df5ebfb7.html",v3Jump:"/static/common/html/v3Jump_bf2a8d6e.html",xd:"/static/common/html/xd_6b936b40.html",addmapBrowse:"/static/common/html/map_add_for_browse_f085f191.html",addmapAddress:"/static/common/html/map_add_address_57c9e564.html",clipboardSwf:"/static/common/swf/zeroClipboard_a7682f22.swf",fileUploaderSwf:"/static/common/swf/fileUploader_21d0747e.swf",songofjoySwf:"/static/common/swf/songofjoy/songofjoy_a238b90f.swf"};c.forEach(b,function(f,e){b[e]=f.replace(/\/static\/common\/(html|swf)\//,"/static/$1/")});a=b;return a},["/static/common/lib/tangram/base/base.js"]);F.module("/static/common/ui/ut/ut.js",function(h,s){var d=h("/static/common/lib/tangram/base/base.js");var b=h("/static/common/ui/form/form.js");var p=+new Date();var o={ea:[],ma:[]},i={},a=false,l=0,j=+new Date(),q={},k=[];function u(x){var t=[x.x,x.y],w=d(this),v=o[this.id];if(v){if(!v.hover){v.hover=true;v.count++}}else{var y=w.position();y.right=y.left+w.width();y.botton=y.top+w.height();v=o[this.id]=d.extend(y,{hover:true,count:1})}if(!v["mouse"+v.count]){v["mouse"+v.count]=[];v["time"+v.count]={start:+new Date()};o.ma.push(v["mouse"+v.count]);o.ea.push(this.id)}v["mouse"+v.count].push(t)}function r(w){var t=[w.x,w.y];var v=o[this.id];if(v&&v.hover){if(t[0]&&t[0]>v.left&&t[0]<v.right&&t[1]&&t[1]>v.top&&t[1]<v.buttom){return}v["time"+v.count].end=(new Date()).getTime();v.hover=false}}function e(){var t=o.ma.length;if(t>0){var v=o.ma[t-1];return v[v.length-1]}}function g(){var v=o.ea.concat();var t=v.length;if(t>10){v=v.splice(t-10,10)}return v.join(",")}function m(){if(a){return i}d.forEach(o.ea,function(w,v){o.ea[v]=q[w]});var t=[e(),g(),(new Date()).getTime()-p,[screen.width,screen.height].join(",")].join("\t");i.c=c(t)+","+j+""+l;a=true;return i}function c(z){var t=[];var x={};var y=j%100;for(var w=0,v=z.length;w<v;w++){var A=z.charCodeAt(w)^y;t.push(A);if(!x[A]){x[A]=[]}x[A].push(w)}return t}function n(t){d.each(t,function(v,w){d("#"+w).mouseover(u).mouseout(r);q[w]=v});d(document.body).click(function(v){l=1})}function f(t,v){new b({method:"post",target:"iktssender",action:t,input:v}).submit().dispose()}s={start:n,report:m,send:f};return s},["/static/common/lib/tangram/base/base.js","/static/common/ui/form/form.js"]);F.module("/static/common/ui/util/util.js",function(c,a){var b=c("/static/common/lib/tangram/base/base.js");a.num2chinese=function(d){var h=d.toString(),o=parseInt(h.split("").reverse().join(""),10),e=["","ʮ","��","ǧ","��"],k=["��","һ","��","��","��","��","��","��","��","��","ʮ"],j=h.length,m="",f=o.toString().length;for(var g=0;g<f;g++){m+=(g==0&&j==2&&(o%10)==1)?"":k[o%10];m+=(o%10)==0?"":e[j-g-1];o=Math.floor(o/10)}return m};a.getModuleName=function(){var d=location.pathname;if(d){d=d.split("/");if(d.length>0&&!d[0]){d.shift()}return d[0]||"home"}};a.addStyleSheet=function(d){if(b.type(d)=="object"&&!b.object.isEmpty(d)){var f=["\n"];for(var e in d){f.push(e,"{",d[e],"}\n")}if(b.browser.ie){document.createStyleSheet().cssText=f.join("")}else{var g=b('<style type="text/css"></style>');g.append(f.join("")).appendTo(b("head")[0])}}};a.textboxPlaceHolder=function(e,h,g){this.textbox=b.isString(e)?b("#"+e):b(e);this.holderText=h||"";this.cssClass="textboxPlaceHolder";g=b.extend({color:"#999"},(b.type(g)=="object"?g:{}));var f=[];for(var i in g){f.push(i+":"+g[i])}f=f.join(";");a.addStyleSheet({".textboxPlaceHolder":f});if(this.textbox.length&&this.holderText){this.textbox.val()||this.textbox.addClass(this.cssClass).val(this.holderText);var d=this;this.textbox.focus(function(j){if(d.isTextboxValueDefault()){d.textbox.val("").removeClass(d.cssClass)}});this.textbox.blur(function(j){if(!d.textbox.val()){d.textbox.addClass(d.cssClass).val(d.holderText)}})}return this};a.textboxPlaceHolder.prototype={constructor:a.textboxPlaceHolder,isTextboxValueDefault:function(){return this.textbox&&(!this.textbox.val()||(this.textbox.val()==this.holderText&&this.textbox.hasClass(this.cssClass)))}};a.getSubStr=function(f,d){f=f||"";var e=f.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**");f=f.slice(0,e.slice(0,d).replace(/\*\*/g," ").replace(/\*/g,"").length);if(b.string(f).getByteLength()>d&&d>0){f=f.slice(0,f.length-1)}return f};a.suffixStr=function(h,d,g){var f=h||"";if(typeof(h)=="string"&&Math.max(Math.floor(d),0)){g=typeof(g)=="undefined"?"...":g.toString();var e=b.string(g).getByteLength();if(e>d){g=a.getSubStr(g,d);e=b.string(g).getByteLength()}if(b.string(h).getByteLength()>d){f=a.getSubStr(h,d-e)+g}}return f};return a},["/static/common/lib/tangram/base/base.js"]);F.module("/static/common/ui/fixed-ask/fixed-ask.js",function(e,b){var d=e("/static/common/lib/tangram/base/base.js");var a=e("/static/common/ui/dialog/dialog.js");var c=e("/static/common/ui/event/event.js");b=function(f){c.fire("login.check",{isLogin:function(){d.get("/iask/api/ikhelplimit?un="+f+"&t="+(new Date()).getTime(),function(h,i,o){var n=d.json.parse(o.responseText);if(!n||n.status!=0){return}var j=n.data;var g=j.replyLimit;var l=j.replyMaxNum;var m=j.ifLogin;var k=j.ifUsernameOK;if(k==0){a.alert("�Բ��𣡴��û������ڡ�");return false}if(l==0||g<=0){a.alert("�Բ��𣡴��û���ʱ�޷�����������������Ի�һλ�û����ԡ�");return false}if(m==0){location.href="/new?fix="+encodeURIComponent(f);return false}else{location.href="/new?fix="+encodeURIComponent(f)}})}})};return b},["/static/common/lib/tangram/base/base.js","/static/common/ui/dialog/dialog.js","/static/common/ui/event/event.js"]);F.module("/static/widget/common/userbar/twbanner/twbanner.js",function(e,b){var d=e("/static/common/lib/tangram/base/base.js");var f=d.cookie.get("IK_TWBAR_X");var a=d("#goto-tw-close");if(f!="1"){a.parent().show()}a.click(function(){var g=new Date();var c=new Date(g.getFullYear(),g.getMonth(),g.getDate()+1);d.cookie.set("IK_TWBAR_X","1",{path:"/",expires:c});a.parent().hide()});return b},["/static/common/lib/tangram/base/base.js"]);
F.module("/static/widget/common/userbar/userbar.js",function(a,e){var c=a("/static/common/lib/tangram/base/base.js");var f=a("/static/common/ui/event/event.js");var h=a("/static/common/ui/login/login.js");var d=a("/static/common/ui/log/log.js");var i=a("/static/common/ui/store/store.js");function g(){c("#userbar-login").click(function(o){f.fire("login.check");o.preventDefault()});var l=c("#userbar-reg");if(l.length){var n=l.prop("pathname"),m=n.indexOf("/")==0?"":"/";m+=n+"?oldurl="+window.location.href;l.attr("href",m)}c("#userbar-logout").attr("href","http://passport.baidu.com/?logout&aid=7&u="+escape(location.href)).mousedown(function(o){d.send({url:location.href,type:"2046",action:"logout"})});var k=c("#no-username-set").click(function(o){f.fire("login.setUsername");o.preventDefault()});if(k.length){d.send({type:2030,pv_from:"usrbar"})}new b("my-iknow","my-home-list",{left:0,top:21});new b("user-name","username-sublist",{right:15,top:21})}function j(){var k=F.context("user");var l="http://msg.baidu.com/ms?ct=18&cm=3&tn=bmSelfUsrStat&mpn=13227114&un="+k.name;c.sio(l).callByBrowser(function(){if(!window.redmsg||redmsg.length<1){return}var m=(msgnum==0)?"˽��":'˽��(<strong style="color:#f00;">'+msgnum+"</strong>)";c("#userbar-msg").html('<a href="http://msg.baidu.com" target="_blank">'+m+"</a>");f.fire("userbar.reposition",{waiting:false})});if(c("#IMBubble").length){F.use("/static/common/ui/hi/hi.js");c.sio("http://st0.im.baidu.com/bubble/iknow/imbubble.js").callByBrowser(function(){if("undefined"!=typeof bdimBubble){var m=F.context("user");bdimBubble.init(m.name,"IMBubble");f.fire("userbar.reposition",{waiting:false})}})}}function b(k,p,l){var m=this,n=c("#"+k),o=c("#"+p);m.timeout=0;n.mouseover(function(t){clearTimeout(m.timeout);var s=c.page.getViewWidth();var r=c("#userbar").outerWidth();var q=c(this).position();if(c.isNumber(l.right)){l.left=n.outerWidth()-o.width()-l.right}o.css({top:l.top,left:q.left+l.left}).show();f.fire("userbar.show",{waiting:true})}).mouseout(function(q){m.timeout=setTimeout(function(){o.hide();clearTimeout(m.timeoutId);f.fire("userbar.hide",{waiting:false})},500)});o.mouseover(function(q){clearTimeout(m.timeout);o.show();f.fire("userbar.show",{waiting:true})}).mouseout(function(q){n.mouseout()});o.find("li a").mouseover(function(q){c(this).addClass("userbar-li-mover").parent().addClass("userbar-li-mover")}).mouseout(function(q){c(this).removeClass("userbar-li-mover").parent().removeClass("userbar-li-mover")})}c(function(){if(F.context("user").isLogin){j()}else{i.remove("ikmsg_data");i.remove("ikmsg_time");c.cookie.remove("msgGuide",{path:"/"});c.cookie.remove("msgGuideStep",{path:"/"})}F.use("/static/common/ui/msg/msg.js",function(k){k.init()})});g();return e},["/static/common/lib/tangram/base/base.js","/static/common/ui/event/event.js","/static/common/ui/login/login.js","/static/common/ui/log/log.js","/static/common/ui/store/store.js"]);F.module("/static/widget/common/menu/menu.js",function(d,a){var c=d("/static/common/lib/tangram/base/base.js"),e=d("/static/common/ui/log/log.js"),b=d("/static/common/ui/event/event.js");b.fire("log.init",{key:2054,evtType:"mousedown",query:"#menu a, #sub-menu a"});return a},["/static/common/lib/tangram/base/base.js","/static/common/ui/log/log.js","/static/common/ui/event/event.js"]);

F.module("/static/common/ui/event/event.js",function(d,a){var c=d("/static/common/lib/tangram/base/base.js");var b=c.createSingle();b.un=b.off;a=F.ec=b;return a},["/static/common/lib/tangram/base/base.js"]);
F.module("/static/common/ui/dialog/dialog.js",function(e,b){var d=e("/static/common/lib/tangram/base/base.js"),c=e("/static/common/ui/event/event.js"),a=e("/static/common/lib/magic/Dialog/Dialog.js"),f=e("/static/common/lib/magic/control/Dialog/Dialog.js");e("/static/common/lib/magic/control/Dialog/$mask/$mask.js");e("/static/common/lib/magic/control/Dialog/$button/$button.js");b=function(i){var g=function(m,l){var n='<a href="#" onclick="return false;" class="btn btn-32-green"><em><b>#{text}</b></em></a>';d(d.string(n).format(m)).appendTo(l);return d(l).children().get(0)};var h=d.extend({autoRender:true,zIndex:100000,mask:{enable:true,opacity:0.25}},i);var k={items:[{text:"确定",click:function(){if(h.onaccept){if(!h.onaccept.apply(this,arguments)){return}}c.fire("dialog.close")}}],align:"center",enable:true};if(h.type=="alert"){h.buttons=h.buttons||k}if(h.type=="confirm"){k.items.push({text:"取消",click:function(){if(h.oncancel){if(!h.oncancel.apply(this,arguments)){return}}c.fire("dialog.close")}});h.buttons=h.buttons||k}if(h.buttons){d.array(h.buttons.items).each(function(l,m){m.builder=m.builder||g})}var j=new a(h);d.forEach(h,function(m,l){if(d.isFunction(m)){j.on(l,m)}});j.center();if(j._options.autoDispose){j.on("hide",function(l){d(j.getElement()).add(j._mask.getElement()).remove()})}if(j._options.autoRender){j.render()}c.on("dialog.close",function(l){if(!j.disposed&&j.isShowing()){j.hide()}});return j};b.alert=function(h,g){return new b(d.extend({type:"alert",width:350,height:160,titleText:"知道提示",content:h,autoDispose:true},g||{}))};return b},["/static/common/lib/tangram/base/base.js","/static/common/ui/event/event.js","/static/common/lib/magic/Dialog/Dialog.js","/static/common/lib/magic/control/Dialog/Dialog.js","/static/common/lib/magic/control/Dialog/$mask/$mask.js","/static/common/lib/magic/control/Dialog/$button/$button.js"]);
F.module("/static/common/ui/fixed-ask/fixed-ask.js",function(e,b){var d=e("/static/common/lib/tangram/base/base.js");var a=e("/static/common/ui/dialog/dialog.js");var c=e("/static/common/ui/event/event.js");b=function(f){c.fire("login.check",{isLogin:function(){d.get("/iask/api/ikhelplimit&un="+f+"&t="+(new Date()).getTime(),function(h,i,o){var n=d.json.parse(o.responseText);if(!n||n.status!=0){return}var j=n.data;var g=j.replyLimit;var l=j.replyMaxNum;var m=j.ifLogin;var k=j.ifUsernameOK;if(k==0){a.alert("对不起！此用户不存在。");return false}if(l==0||g<=0){a.alert("对不起！此用户暂时无法接收提问求助，您可以换一位用户试试。");return false}if(m==0){location.href="/new?fix="+encodeURIComponent(f);return false}else{location.href="/new?fix="+encodeURIComponent(f)}})}})};return b},["/static/common/lib/tangram/base/base.js","/static/common/ui/dialog/dialog.js","/static/common/ui/event/event.js"]);
