<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
 xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
 id="WebApp_ID" version="2.5">
    <display-name>
        ruaho
    </display-name>
    <context-param>
        <param-name>
            jndi_prefix
        </param-name>
        <param-value>
            java:comp/env
        </param-value>
    </context-param>
    <context-param>
        <param-name>
            datasource_prefix
        </param-name>
        <param-value>
            jdbc
        </param-value>
        <!-- 要求数据源JNDI名称为：jdbc/xxxx 第一个数据源为系统缺省数据源 -->
    </context-param>
    <context-param>
        <param-name>
            listener
        </param-name>
        <param-value>
            com.rh.core.base.start.LogMgr,com.rh.core.base.start.DsMgr,com.rh.core.base.start.ScheduleLoader,com.rh.core.base.start.CacheLoader,com.rh.core.base.start.ServLisLoader,com.rh.core.base.start.MsgLisLoader
        </param-value>
        <!-- com.rh.core.base.start.LogMgr log日志 -->
        <!-- com.rh.core.base.start.DsMgr 数据源 -->
        <!-- com.rh.core.base.start.CacheLoader 启动装载服务和字典缓存 -->
        <!-- com.rh.core.base.start.ScheduleLoader 任务调度 -->
        <!-- com.rh.core.base.start.ImLoader IM即时消息 -->
        <!-- com.rh.core.base.start.ServLisLoader 服务监听加载器 -->
        <!-- com.rh.core.base.start.MsgLisLoader 服务监听加载器 -->
    </context-param>
    <context-param>
        <param-name>
            log
        </param-name>
        <param-value>
            log4j.properties
        </param-value>
    </context-param>
    <context-param>
        <param-name>
            JSON_LOCATION
        </param-name>
        <param-value>
            @WEB-INF-DOC@
        </param-value>
        <!-- 非@WEB-INF-DOC@则为实际文件路径，用于支持文件共享存储（集群运行模式） -->
    </context-param>
    <context-param>
        <param-name>
            LOG_SQL_TIME
        </param-name>
        <param-value>
            500
        </param-value>
    </context-param>
    <context-param>
        <param-name>
            LOG_SQL_SIZE
        </param-name>
        <param-value>
            500
        </param-value>
    </context-param>
    <context-param>
        <param-name>
            SQL_MAX_SIZE
        </param-name>
        <param-value>
            40000
        </param-value>
        <!-- 单条sql执行最大记录数 -->
    </context-param>
    <context-param>
        <param-name>
            DEBUG_MODE
        </param-name>
        <param-value>
            true
        </param-value>
        <!-- false(缺省：生产模式) true(调试模式) 调试模式下页面模版不缓存，JS和CSS文件不压缩，权限不检查 -->
    </context-param>
    <context-param>
        <param-name>
            USER_PNG_DEFAULT
        </param-name>
        <param-value>
            /sy/theme/default/images/common/user
        </param-value>
        <!-- 用户缺省图片，从/开始的全路径，男user0.png，女user1.png -->
    </context-param>
    <context-param>
        <param-name>
            CACHE_DICT_SCHED_LOAD
        </param-name>
        <param-value>
            SY_ORG_CMPY,SY_ORG_USER,SY_ORG_DEPT_ALL,SY_ORG_ODEPT_ALL,SY_ORG_DEPT_USER_ALL
        </param-value>
        <!-- 启动自动加载的外部字典编码，多个逗号分隔，例如：SY_ORG_CMPY,SY_ORG_DEPT,SY_ORG_DEPT_USER -->
    </context-param>
    <context-param>
        <param-name>
            SY_SERV_ACT_NAMES
        </param-name>
        <param-value>
        </param-value>
        <!-- 通用按钮名称设定，用于重载通用的增删改查按钮名称，例如：{'add':' 新 建 ','delete':' 全 删 '} -->
    </context-param>
    
    <context-param>
	    <param-name>SY_PRO_CAT</param-name>
	    <param-value>sy,oa,pt,aeon</param-value>
			<!-- 产品目录，缺省为产品简称（服务前缀），多个逗号分隔，例如sy,op,cm,km,oa,pt  (core，扩展，内容，知识，OA，门户） -->
		</context-param>
    
    <listener>
        <listener-class>
            com.rh.core.base.ContextListener
        </listener-class>
    </listener>
    <!--添加axis webservice监听-->
    <listener>
        <listener-class>
            org.apache.axis.transport.http.AxisHTTPSessionListener
        </listener-class>
    </listener>
    
    <!--添加axis servlet开始-->
    <servlet>
        <servlet-name>
            AxisServlet
        </servlet-name>
        <servlet-class>
            org.apache.axis.transport.http.AxisServlet
        </servlet-class>
    </servlet>
    <servlet>
        <servlet-name>
            AdminServlet
        </servlet-name>
        <servlet-class>
            org.apache.axis.transport.http.AdminServlet
        </servlet-class>
        <load-on-startup>
            100
        </load-on-startup>
    </servlet>
    <servlet>
        <servlet-name>
            SOAPMonitorService
        </servlet-name>
        <servlet-class>
            org.apache.axis.monitor.SOAPMonitorService
        </servlet-class>
        <init-param>
            <param-name>
                SOAPMonitorPort
            </param-name>
            <param-value>
                5001
            </param-value>
        </init-param>
        <load-on-startup>
            100
        </load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>
            AxisServlet
        </servlet-name>
        <url-pattern>
            /servlet/AxisServlet
        </url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>
            AxisServlet
        </servlet-name>
        <url-pattern>
            *.jws
        </url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>
            AxisServlet
        </servlet-name>
        <url-pattern>
            /services/*
        </url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>
            SOAPMonitorService
        </servlet-name>
        <url-pattern>
            /SOAPMonitor
        </url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>
            AdminServlet
        </servlet-name>
        <url-pattern>
            /servlet/AdminServlet
        </url-pattern>
    </servlet-mapping>
    <mime-mapping>
        <extension>
            wsdl
        </extension>
        <mime-type>
            text/xml
        </mime-type>
    </mime-mapping>
    <mime-mapping>
        <extension>
            xsd
        </extension>
        <mime-type>
            text/xml
        </mime-type>
    </mime-mapping>
    <!--添加axis servlet结束-->
    
    <servlet>
        <servlet-name>
            DoServlet
        </servlet-name>
        <servlet-class>
            com.rh.core.DoServlet
        </servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>
            DoServlet
        </servlet-name>
        <url-pattern>
            *.do
        </url-pattern>
    </servlet-mapping>
    <servlet>
        <servlet-name>
            FileServlet
        </servlet-name>
        <servlet-class>
            com.rh.core.FileServlet
        </servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>
            FileServlet
        </servlet-name>
        <url-pattern>
            /file
        </url-pattern>
        <url-pattern>
            /file/*
        </url-pattern>
    </servlet-mapping>
    
    <servlet>
        <servlet-name>
            httpFileStorage
        </servlet-name>
        <servlet-class>
            com.rh.core.comm.file.HttpFileStorageServlet
        </servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>
            httpFileStorage
        </servlet-name>
        <url-pattern>
            /fileStorage/*
        </url-pattern>
    </servlet-mapping>
    
    <!-- news servlet -->
    <servlet>
        <servlet-name>
            CmsServlet
        </servlet-name>
        <servlet-class>
            com.rh.core.comm.cms.CmsServlet
        </servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>
            CmsServlet
        </servlet-name>
        <url-pattern>
            /cms
        </url-pattern>
        <url-pattern>
            /cms/*
        </url-pattern>
        <url-pattern>
            /news
        </url-pattern>
        <url-pattern>
            /news/*
        </url-pattern>
        <url-pattern>
            /wenku
        </url-pattern>
        <url-pattern>
            /wenku/*
        </url-pattern>
        <url-pattern>
            /bbs
        </url-pattern>
        <url-pattern>
            /bbs/*
        </url-pattern>
    </servlet-mapping>
    
    <!-- infos servlet -->
    <servlet>
        <servlet-name>
            CmsInfosServlet
        </servlet-name>
        <servlet-class>
            com.rh.core.comm.cms.CmsInfosServlet
        </servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>
            CmsInfosServlet
        </servlet-name>
        
        <url-pattern>
            /infos
        </url-pattern>
        <url-pattern>
            /infos/*
        </url-pattern>
        <url-pattern>
            /checks
        </url-pattern>
        <url-pattern>
            /checks/*
        </url-pattern>
    </servlet-mapping>
    
    <!--Web Service -->
    <servlet>
        <servlet-name>
            WsServlet
        </servlet-name>
        <servlet-class>
            com.rh.core.WsServlet
        </servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>
            WsServlet
        </servlet-name>
        <url-pattern>
            *.ws
        </url-pattern>
    </servlet-mapping>
    <servlet> 
			<servlet-name>AuthServlet</servlet-name> 
			<servlet-class>com.rh.sso.AuthServlet</servlet-class> 
		</servlet> 
		<servlet-mapping> 
			<servlet-name>AuthServlet</servlet-name> 
			<url-pattern>/auth</url-pattern> 
			<url-pattern>/auth/*</url-pattern> 
		</servlet-mapping>
		<!-- 百年人寿内网新闻、图片、文档链接处理  start -->
		<servlet>
			<servlet-name>BnOAServlet</servlet-name> 
			<servlet-class>com.rh.bn.BnOAServlet</servlet-class> 
		</servlet> 
		<servlet-mapping> 
		<servlet-name>BnOAServlet</servlet-name> 
			<url-pattern>/c/document_library/*</url-pattern> 
			<url-pattern>/image/*</url-pattern> 
			<url-pattern>/bnnews/*</url-pattern>
			<url-pattern>/web/guest/home</url-pattern> 
		</servlet-mapping>
<!-- 百年人寿内网新闻、图片、文档链接处理  end -->
<welcome-file-list>
    <welcome-file>
			index.jsp
    </welcome-file>
</welcome-file-list>

    <filter>
    	<filter-name>NtlmHttpFilter</filter-name>
			<filter-class>jcifs.http.NtlmHttpFilter</filter-class>
			<init-param>
				<param-name>jcifs.http.domainController</param-name>
				<param-value>10.10.2.23</param-value>
			</init-param>
			
    	<init-param>  
				<param-name>jcifs.http.loadBalance</param-name>  
				<param-value>false</param-value>  
			</init-param>  
			<init-param>  
				<param-name>jcifs.http.enableBasic</param-name>  
				<param-value>false</param-value>  
			</init-param>  
			<init-param>  
				<param-name>jcifs.http.insecureBasic</param-name>  
				<param-value>false</param-value>  
			</init-param>  
			<init-param>  
				<param-name>jcifs.http.basicRealm</param-name>  
				<param-value>jCIFS</param-value>  
			</init-param>  
			<init-param>  
				<param-name>jcifs.smb.client.ssnLimit</param-name>  
				<param-value>1000</param-value>  
			</init-param>  
			<init-param>  
				<param-name>jcifs.util.loglevel</param-name>  
				<param-value>0</param-value>  
			</init-param>
			<init-param>
		            <param-name>jcifs.smb.client.soTimeout</param-name>
		            <param-value>1000</param-value>
	        </init-param>
  	</filter>	
		<filter-mapping>
			<filter-name>NtlmHttpFilter</filter-name>
			<url-pattern>/login_ntlm.jsp</url-pattern>
		</filter-mapping>
  	<filter>
  		<filter-name>BnNtlmFilter</filter-name>
	    <filter-class>com.rh.bn.filter.impl.BnNtlmFilter</filter-class>
		</filter>
  	<filter-mapping>
	    <filter-name>BnNtlmFilter</filter-name>
			<url-pattern>/login_ntlm.jsp</url-pattern>
		</filter-mapping>
    
    <!--压缩反馈给客户端的数据：开始-->
    <filter>
        <filter-name>
            GzipFilter
        </filter-name>
        <filter-class>
            com.rh.core.util.http.GZipServletFilter
        </filter-class>
    </filter>
    <filter-mapping>
        <filter-name>
            GzipFilter
        </filter-name>
        <url-pattern>
            *.js
        </url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>
            GzipFilter
        </filter-name>
        <url-pattern>
            *.css
        </url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>
            GzipFilter
        </filter-name>
        <url-pattern>
            *.do
        </url-pattern>
    </filter-mapping>
    <filter-mapping>
        <filter-name>
            GzipFilter
        </filter-name>
        <url-pattern>
            *.jsp
        </url-pattern>
    </filter-mapping>
    <!--压缩反馈给客户端的数据：结束-->
    
    <filter>
        <filter-name>
            ServNameAppenderFilter
        </filter-name>
        <filter-class>
            com.rh.oa.ServNameAppenderFilter
        </filter-class>
    </filter>
    <filter-mapping>
        <filter-name>
            ServNameAppenderFilter
        </filter-name>
        <url-pattern>
            *.jsp
        </url-pattern>
        <url-pattern>
            *.do
        </url-pattern>
    </filter-mapping>
    
    
    <filter>
        <filter-name>
            UrlRewriteFilter
        </filter-name>
        <filter-class>
            org.tuckey.web.filters.urlrewrite.UrlRewriteFilter
        </filter-class>
    </filter>
    <filter-mapping>
        <filter-name>
            UrlRewriteFilter
        </filter-name>
        <url-pattern>
            /convert/*
        </url-pattern>
        <dispatcher>
            REQUEST
        </dispatcher>
        <dispatcher>
            FORWARD
        </dispatcher>
    </filter-mapping>
    
    
    <!-- 模版缓存过滤 开始 -->
    <filter>
        <filter-name>
            tmplCacheFilter
        </filter-name>
        <filter-class>
            com.rh.core.util.http.PageCacheFilter
        </filter-class>
        <init-param>
            <param-name>
                cacheName
            </param-name>
            <param-value>
                SimplePageCachingFilter
            </param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>
            tmplCacheFilter
        </filter-name>
        <url-pattern>
            /SY_COMM_TEMPL.show.do
        </url-pattern>
    </filter-mapping>
    <!-- 模版缓存过滤 结束 -->
    <!-- 办理兼岗用户待办监控 开始 -->
    <filter>
        <filter-name>
            todoUserFilter
        </filter-name>
        <filter-class>
            com.rh.oa.http.TodoUserFilter
        </filter-class>
    </filter>
    <filter-mapping>
        <filter-name>
            todoUserFilter
        </filter-name>
        <url-pattern>
            /sy/comm/page/page.jsp
        </url-pattern>
        <url-pattern>
            /sy/comm/page/confirm.jsp
        </url-pattern>
    </filter-mapping>
    <!-- 办理兼岗用户待办监控 结束 -->

	<error-page>
	   <error-code>404</error-code>
	    <location>/404.html</location>
	</error-page>
	
	<error-page>
	    <error-code>500</error-code>
	    <location>/500.html</location>
	</error-page>


</web-app>
